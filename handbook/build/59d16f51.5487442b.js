(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{133:function(n,e,t){"use strict";t.d(e,"a",(function(){return m})),t.d(e,"b",(function(){return C}));var r=t(0),o=t.n(r);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},a=Object.keys(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var p=o.a.createContext({}),l=function(n){var e=o.a.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):c(c({},e),n)),t},m=function(n){var e=l(n.components);return o.a.createElement(p.Provider,{value:e},n.children)},b={inlineCode:"code",wrapper:function(n){var e=n.children;return o.a.createElement(o.a.Fragment,{},e)}},u=o.a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,a=n.originalType,i=n.parentName,p=s(n,["components","mdxType","originalType","parentName"]),m=l(t),u=r,C=m["".concat(i,".").concat(u)]||m[u]||b[u]||a;return t?o.a.createElement(C,c(c({ref:e},p),{},{components:t})):o.a.createElement(C,c({ref:e},p))}));function C(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var a=t.length,i=new Array(a);i[0]=u;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=n,c.mdxType="string"==typeof n?n:r,i[1]=c;for(var p=2;p<a;p++)i[p]=t[p];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},134:function(n,e,t){"use strict";var r=t(0),o=t(19);e.a=function(){var n=Object(r.useContext)(o.a);if(null===n)throw new Error("Docusaurus context not provided");return n}},135:function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"a",(function(){return i}));var r=t(134),o=t(136);function a(){var n=Object(r.a)().siteConfig,e=(n=void 0===n?{}:n).baseUrl,t=void 0===e?"/":e,a=n.url;return{withBaseUrl:function(n,e){return function(n,e,t,r){var a=void 0===r?{}:r,i=a.forcePrependBaseUrl,c=void 0!==i&&i,s=a.absolute,p=void 0!==s&&s;if(!t)return t;if(t.startsWith("#"))return t;if(Object(o.b)(t))return t;if(c)return e+t;var l=t.startsWith(e)?t:e+t.replace(/^\//,"");return p?n+l:l}(a,t,n,e)}}}function i(n,e){return void 0===e&&(e={}),(0,a().withBaseUrl)(n,e)}},136:function(n,e,t){"use strict";function r(n){return!0===/^(\w*:|\/\/)/.test(n)}function o(n){return void 0!==n&&!r(n)}t.d(e,"b",(function(){return r})),t.d(e,"a",(function(){return o}))},137:function(n,e,t){"use strict";function r(n){var e,t,o="";if("string"==typeof n||"number"==typeof n)o+=n;else if("object"==typeof n)if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=r(n[e]))&&(o&&(o+=" "),o+=t);else for(e in n)n[e]&&(o&&(o+=" "),o+=e);return o}e.a=function(){for(var n,e,t=0,o="";t<arguments.length;)(n=arguments[t++])&&(e=r(n))&&(o&&(o+=" "),o+=e);return o}},138:function(n,e,t){"use strict";var r=t(0),o=Object(r.createContext)(void 0);e.a=o},139:function(n,e,t){"use strict";var r=t(0),o=t(138);e.a=function(){var n=Object(r.useContext)(o.a);if(null==n)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return n}},140:function(n,e,t){"use strict";var r=t(0),o=t.n(r),a=t(139),i=t(137),c=t(47),s=t.n(c),p=37,l=39;e.a=function(n){var e=n.block,t=n.children,c=n.defaultValue,m=n.values,b=n.groupId,u=Object(a.a)(),C=u.tabGroupChoices,S=u.setTabGroupChoices,d=Object(r.useState)(c),x=d[0],y=d[1],D=Object(r.useState)(!1),g=D[0],v=D[1];if(null!=b){var f=C[b];null!=f&&f!==x&&m.some((function(n){return n.value===f}))&&y(f)}var O=function(n){y(n),null!=b&&S(b,n)},T=[],h=function(n){n.metaKey||n.altKey||n.ctrlKey||v(!0)},j=function(){v(!1)};return Object(r.useEffect)((function(){window.addEventListener("keydown",h),window.addEventListener("mousedown",j)}),[]),o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":e})},m.map((function(n){var e=n.value,t=n.label;return o.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":x===e,className:Object(i.a)("tabs__item",s.a.tabItem,{"tabs__item--active":x===e}),style:g?{}:{outline:"none"},key:e,ref:function(n){return T.push(n)},onKeyDown:function(n){!function(n,e,t){switch(t.keyCode){case l:!function(n,e){var t=n.indexOf(e)+1;n[t]?n[t].focus():n[0].focus()}(n,e);break;case p:!function(n,e){var t=n.indexOf(e)-1;n[t]?n[t].focus():n[n.length-1].focus()}(n,e)}}(T,n.target,n),h(n)},onFocus:function(){return O(e)},onClick:function(){O(e),v(!1)},onPointerDown:function(){return v(!1)}},t)}))),o.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},r.Children.toArray(t).filter((function(n){return n.props.value===x}))[0]))}},141:function(n,e,t){"use strict";var r=t(0),o=t.n(r);e.a=function(n){return o.a.createElement("div",null,n.children)}},87:function(n,e,t){"use strict";t.r(e),t.d(e,"frontMatter",(function(){return s})),t.d(e,"metadata",(function(){return p})),t.d(e,"rightToc",(function(){return l})),t.d(e,"default",(function(){return b}));var r=t(2),o=t(6),a=(t(0),t(133)),i=(t(135),t(140)),c=t(141),s={id:"dbcontext-multi-database",title:"8.16 \u591a\u6570\u636e\u5e93\u64cd\u4f5c",sidebar_label:"8.16 \u591a\u6570\u636e\u5e93\u64cd\u4f5c"},p={unversionedId:"dbcontext-multi-database",id:"dbcontext-multi-database",isDocsHomePage:!1,title:"8.16 \u591a\u6570\u636e\u5e93\u64cd\u4f5c",description:"8.16.1 Fur \u652f\u6301\u6570\u636e\u5e93\u63d0\u4f9b\u5668",source:"@site/docs\\dbcontext-multi-database.mdx",slug:"/dbcontext-multi-database",permalink:"/fur/docs/dbcontext-multi-database",editUrl:"https://gitee.com/monksoul/Fur/tree/rc1/handbook/docs/dbcontext-multi-database.mdx",version:"current",sidebar_label:"8.16 \u591a\u6570\u636e\u5e93\u64cd\u4f5c",sidebar:"docs",previous:{title:"8.15 Sql \u9ad8\u7ea7\u4ee3\u7406",permalink:"/fur/docs/dbcontext-sql-proxy"},next:{title:"8.17 \u8bfb\u5199\u5206\u79bb/\u4e3b\u4ece\u5e93",permalink:"/fur/docs/dbcontext-read-write"}},l=[{value:"8.16.1 <code>Fur</code> \u652f\u6301\u6570\u636e\u5e93\u63d0\u4f9b\u5668",id:"8161-fur-\u652f\u6301\u6570\u636e\u5e93\u63d0\u4f9b\u5668",children:[{value:"8.16.1.1 \u6570\u636e\u5e93\u63d0\u4f9b\u5668\u5bf9\u5e94\u5305",id:"81611-\u6570\u636e\u5e93\u63d0\u4f9b\u5668\u5bf9\u5e94\u5305",children:[]}]},{value:"8.16.2 \u591a\u6570\u636e\u5e93\u4f7f\u7528\u65b9\u5f0f",id:"8162-\u591a\u6570\u636e\u5e93\u4f7f\u7528\u65b9\u5f0f",children:[{value:"8.16.2.1 \u5b9e\u4f53\u4ed3\u50a8\u65b9\u5f0f",id:"81621-\u5b9e\u4f53\u4ed3\u50a8\u65b9\u5f0f",children:[]},{value:"8.16.2.2 \u975e\u6cdb\u578b\u4ed3\u50a8\u65b9\u5f0f",id:"81622-\u975e\u6cdb\u578b\u4ed3\u50a8\u65b9\u5f0f",children:[]},{value:"8.16.2.3 <code>Sql</code> \u4ed3\u50a8\u65b9\u5f0f",id:"81623-sql-\u4ed3\u50a8\u65b9\u5f0f",children:[]},{value:"8.16.2.4 \u5b9e\u4f53\u5b9a\u4e49\u65b9\u5f0f",id:"81624-\u5b9e\u4f53\u5b9a\u4e49\u65b9\u5f0f",children:[]},{value:"8.16.2.5 Linq \u51fd\u6570\u65b9\u5f0f",id:"81625-linq-\u51fd\u6570\u65b9\u5f0f",children:[]}]},{value:"8.16.3 \u5404\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55",id:"8163-\u5404\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55",children:[]},{value:"8.16.4 \u53cd\u9988\u4e0e\u5efa\u8bae",id:"8164-\u53cd\u9988\u4e0e\u5efa\u8bae",children:[]}],m={rightToc:l};function b(n){var e=n.components,t=Object(o.a)(n,["components"]);return Object(a.b)("wrapper",Object(r.a)({},m,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"8161-fur-\u652f\u6301\u6570\u636e\u5e93\u63d0\u4f9b\u5668"},"8.16.1 ",Object(a.b)("inlineCode",{parentName:"h2"},"Fur")," \u652f\u6301\u6570\u636e\u5e93\u63d0\u4f9b\u5668"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"SqlServer"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Sqlite"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Cosmos"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"InMemory"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"MySql"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"PostgreSQL"),Object(a.b)("th",Object(r.a)({parentName:"tr"},{align:null}),"Oracle"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714"),Object(a.b)("td",Object(r.a)({parentName:"tr"},{align:null}),"\u2714")))),Object(a.b)("h3",{id:"81611-\u6570\u636e\u5e93\u63d0\u4f9b\u5668\u5bf9\u5e94\u5305"},"8.16.1.1 \u6570\u636e\u5e93\u63d0\u4f9b\u5668\u5bf9\u5e94\u5305"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"SqlServer"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Microsoft.EntityFrameworkCore.SqlServer")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"Sqlite"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Microsoft.EntityFrameworkCore.Sqlite")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"Cosmos"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Microsoft.EntityFrameworkCore.Cosmos")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"InMemory"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Microsoft.EntityFrameworkCore.InMemory")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"MySql"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Pomelo.EntityFrameworkCore.MySql")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"PostgreSQL"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Npgsql.EntityFrameworkCore.PostgreSQL")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"Oracle"),"\uff1a",Object(a.b)("inlineCode",{parentName:"li"},"Citms.EntityFrameworkCore.Oracle"))),Object(a.b)("h2",{id:"8162-\u591a\u6570\u636e\u5e93\u4f7f\u7528\u65b9\u5f0f"},"8.16.2 \u591a\u6570\u636e\u5e93\u4f7f\u7528\u65b9\u5f0f"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"Fur")," \u901a\u8fc7\u72ec\u521b\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668")," \u5b9e\u73b0\u591a\u6570\u636e\u5e93\u7075\u6d3b\u64cd\u4f5c\u5207\u6362\u3002\u53ea\u9700\u8981\u4e3a\u6bcf\u4e00\u79cd\u6570\u636e\u5e93\u7ed1\u5b9a\u552f\u4e00\u7684\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668\u5373\u53ef\u3002"),Object(a.b)("p",null,"\u4ee5\u4e0b\u662f ",Object(a.b)("inlineCode",{parentName:"p"},"Fur")," \u652f\u6301\u591a\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u5b9e\u4f8b\uff1a"),Object(a.b)("h3",{id:"81621-\u5b9e\u4f53\u4ed3\u50a8\u65b9\u5f0f"},"8.16.2.1 \u5b9e\u4f53\u4ed3\u50a8\u65b9\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),"// \u5207\u6362\u5230 MSSQL \u64cd\u4f5c Person\u8868\nvar mssqlRepository = personRepository.Change<Person, MsSqlDbContextLocator>();\n\n// \u5207\u6362\u5230 MySql \u64cd\u4f5c Person\u8868\nvar mysqlRepository = personRepository.Change<Person, MySqlDbContextLocator>();\n\n// \u5207\u6362\u5230 Sqlite \u64cd\u4f5c Person\u8868\nvar sqliteRepository = personRepository.Change<Person, SqliteDbContextLocator>();\n\n")),Object(a.b)("h3",{id:"81622-\u975e\u6cdb\u578b\u4ed3\u50a8\u65b9\u5f0f"},"8.16.2.2 \u975e\u6cdb\u578b\u4ed3\u50a8\u65b9\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),"// \u5207\u6362\u5230 MSSQL \u64cd\u4f5c Person\u8868\nvar mssqlRepository = repository.Change<Person, MsSqlDbContextLocator>();\n\n// \u5207\u6362\u5230 MySql \u64cd\u4f5c Person\u8868\nvar mysqlRepository = repository.Change<Person, MySqlDbContextLocator>();\n\n// \u5207\u6362\u5230 Sqlite \u64cd\u4f5c Person\u8868\nvar sqliteRepository = repository.Change<Person, SqliteDbContextLocator>();\n")),Object(a.b)("h3",{id:"81623-sql-\u4ed3\u50a8\u65b9\u5f0f"},"8.16.2.3 ",Object(a.b)("inlineCode",{parentName:"h3"},"Sql")," \u4ed3\u50a8\u65b9\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),"// \u5207\u6362\u5230 MSSQL \u64cd\u4f5c Person\u8868\nvar mssqlRepository = sqlRepository.Change<MsSqlDbContextLocator>();\n\n// \u5207\u6362\u5230 MySql \u64cd\u4f5c Person\u8868\nvar mysqlRepository = sqlRepository.Change<MySqlDbContextLocator>();\n\n// \u5207\u6362\u5230 Sqlite \u64cd\u4f5c Person\u8868\nvar sqliteRepository = sqlRepository.Change<SqliteDbContextLocator>();\n")),Object(a.b)("h3",{id:"81624-\u5b9e\u4f53\u5b9a\u4e49\u65b9\u5f0f"},"8.16.2.4 \u5b9e\u4f53\u5b9a\u4e49\u65b9\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),"\n// \u652f\u6301\u4e00\u4e2a\u6570\u636e\u5e93\npublic class Person: IEntity<MySqlDbContextLocator>\n{\n    // ....\n}\n\n// \u652f\u6301\u591a\u4e2a\u6570\u636e\u5e93\npublic class Person: IEntity<MySqlDbContextLocator, SqliteDbContextLocator>\n{\n    // ....\n}\n")),Object(a.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"\u5c0f\u77e5\u8bc6")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"\u6240\u6709\u7684 ",Object(a.b)("inlineCode",{parentName:"p"},"\u5b9e\u4f53\u4f9d\u8d56\u63a5\u53e3\u6216\u62bd\u8c61\u7c7b")," \u90fd\u652f\u6301\u6cdb\u578b\u65b9\u5f0f \u6307\u5b9a \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668\uff0c\u6700\u591a\u652f\u6301 ",Object(a.b)("inlineCode",{parentName:"p"},"8")," \u4e2a\u3002"))),Object(a.b)("h3",{id:"81625-linq-\u51fd\u6570\u65b9\u5f0f"},"8.16.2.5 Linq \u51fd\u6570\u65b9\u5f0f"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'public static class QueryFunctions\n{\n    [QueryableFunction("FN_GetId", "dbo", typeof(MySqlDbContextLocator), typeof(SqliteDbContextLocator))]\n    public static int GetId(int id) => throw new NotSupportedException();\n}\n')),Object(a.b)("h2",{id:"8163-\u5404\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55"},"8.16.3 \u5404\u4e2a\u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55"),Object(a.b)("p",null,"\u76f4\u63a5\u62f7\u8d1d\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u7248\u672c\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u5373\u53ef\u3002"),Object(a.b)(i.a,{defaultValue:"sqlserver",values:[{label:"SqlServer",value:"sqlserver"},{label:"Sqlite",value:"sqlite"},{label:"Cosmos",value:"cosmos"},{label:"InMemory",value:"inMemory"},{label:"MySql",value:"mySql"},{label:"PostgreSQL",value:"postgreSQL"},{label:"Oracle",value:"oracle"}],mdxType:"Tabs"},Object(a.b)(c.a,{value:"sqlserver",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// SqlServer \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class SqlServerServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlServerPool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddSqlServerPool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlServerPool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureSqlServer(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 SqlServer \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlServer<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddSqlServer<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 SqlServer \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlServer<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureSqlServer(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u6570\u636e\u5e93 SqlServer\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureSqlServer(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseSqlServer(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"sqlite",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// Sqlite \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class SqliteServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlitePool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddSqlitePool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlitePool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureSqlite(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 Sqlite \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlite<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddSqlite<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 Sqlite \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddSqlite<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureSqlite(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6eSqlite\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureSqlite(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseSqlite(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"cosmos",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// Cosmos \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class CosmosServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddCosmosPool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddCosmosPool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddCosmosPool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureCosmos(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 Cosmos \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddCosmos<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddCosmos<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 Cosmos \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddCosmos<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureCosmos(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6e Cosmos\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureCosmos(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseCosmos(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"inMemory",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// InMemory \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class InMemoryServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddInMemoryPool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddInMemoryPool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddInMemoryPool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureInMemory(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 InMemory \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddInMemory<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddInMemory<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 InMemory \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddInMemory<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureInMemory(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6e InMemory\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureInMemory(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseInMemory(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"mySql",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// MySql \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class MySqlServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddMySqlPool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddMySqlPool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddMySqlPool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureMySql(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 MySql \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddMySql<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddMySql<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 MySql \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddMySql<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureMySql(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6e MySql\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureMySql(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseMySql(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"postgreSQL",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// PostgreSQL \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class PostgreSQLServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddPostgreSQLPool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddPostgreSQLPool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddPostgreSQLPool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigurePostgreSQL(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 PostgreSQL \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddPostgreSQL<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddPostgreSQL<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 PostgreSQL \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddPostgreSQL<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigurePostgreSQL(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6e PostgreSQL\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigurePostgreSQL(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UsePostgreSQL(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n'))),Object(a.b)(c.a,{value:"oracle",mdxType:"TabItem"},Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-cs"}),'using Fur.DatabaseAccessor;\nusing Fur.DependencyInjection;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Diagnostics;\nusing System;\n\nnamespace Microsoft.Extensions.DependencyInjection\n{\n    /// <summary>\n    /// Oracle \u6570\u636e\u5e93\u670d\u52a1\u62d3\u5c55\n    /// </summary>\n    [NonBeScan]\n    public static class OracleServiceCollectionExtensions\n    {\n        /// <summary>\n        /// \u6dfb\u52a0\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddOraclePool<TDbContext>(this IServiceCollection services, string connectionString = default, int poolSize = 100)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddOraclePool<TDbContext, DbContextLocator>(connectionString, poolSize);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0\u5176\u4ed6\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="poolSize">\u6c60\u5927\u5c0f</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddOraclePool<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, int poolSize = 100, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContextPool<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureOracle(connStr, options), interceptors), poolSize: poolSize);\n\n            return services;\n        }\n\n        /// <summary>\n        ///  \u6dfb\u52a0\u9ed8\u8ba4 Oracle \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddOracle<TDbContext>(this IServiceCollection services, string connectionString = default)\n            where TDbContext : DbContext\n        {\n            // \u907f\u514d\u91cd\u590d\u6ce8\u518c\u9ed8\u8ba4\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            if (Penetrates.DbContextLocators.ContainsKey(typeof(DbContextLocator))) throw new InvalidOperationException("Prevent duplicate registration of default DbContext");\n\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            return services.AddOracle<TDbContext, DbContextLocator>(connectionString);\n        }\n\n        /// <summary>\n        /// \u6dfb\u52a0 Oracle \u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n        /// </summary>\n        /// <typeparam name="TDbContext">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587</typeparam>\n        /// <typeparam name="TDbContextLocator">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u5b9a\u4f4d\u5668</typeparam>\n        /// <param name="services">\u670d\u52a1</param>\n        /// <param name="connectionString">\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="interceptors">\u62e6\u622a\u5668</param>\n        /// <returns>\u670d\u52a1\u96c6\u5408</returns>\n        public static IServiceCollection AddOracle<TDbContext, TDbContextLocator>(this IServiceCollection services, string connectionString = default, params IInterceptor[] interceptors)\n            where TDbContext : DbContext\n            where TDbContextLocator : class, IDbContextLocator\n        {\n            // \u6ce8\u518c\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            services.RegisterDbContext<TDbContext, TDbContextLocator>();\n\n            // \u914d\u7f6e\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\n            var connStr = Penetrates.GetDbContextConnectionString<TDbContext>(connectionString);\n            services.AddDbContext<TDbContext>(Penetrates.ConfigureDbContext(connStr, options => ConfigureOracle(connStr, options), interceptors));\n\n            return services;\n        }\n\n        /// <summary>\n        /// \u914d\u7f6e Oracle\n        /// </summary>\n        /// <param name="connectionString">\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</param>\n        /// <param name="options">\u6570\u636e\u5e93\u4e0a\u4e0b\u6587\u9009\u9879\u6784\u5efa\u5668</param>\n        private static void ConfigureOracle(string connectionString, DbContextOptionsBuilder options)\n        {\n            options.UseOracle(connectionString, options =>\n            {\n                // \u914d\u7f6e\u5168\u5c40\u5207\u5272 Sql\uff0c\u800c\u4e0d\u662f\u751f\u6210\u5355\u4e2a\u590d\u6742 sql\n                //options.UseQuerySplittingBehavior(QuerySplittingBehavior.SplitQuery);\n                // \u914d\u7f6e code first \u7a0b\u5e8f\u96c6\n                options.MigrationsAssembly("Fur.Database.Migrations");\n\n                //options.EnableRetryOnFailure();\n                //options.MigrationsHistoryTable("__EFMigrationsHistory", "fur");\n            });\n        }\n    }\n}\n')))),Object(a.b)("h2",{id:"8164-\u53cd\u9988\u4e0e\u5efa\u8bae"},"8.16.4 \u53cd\u9988\u4e0e\u5efa\u8bae"),Object(a.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"\u4e0e\u6211\u4eec\u4ea4\u6d41")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"\u7ed9 Fur \u63d0 ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://gitee.com/monksoul/Fur/issues/new?issue"}),"Issue"),"\u3002"))))}b.isMDXComponent=!0}}]);