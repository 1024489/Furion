"use strict";(self.webpackChunkfurion=self.webpackChunkfurion||[]).push([[6494],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return g}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(t),g=o,c=m["".concat(s,".").concat(g)]||m[g]||p[g]||a;return t?r.createElement(c,i(i({ref:n},u),{},{components:t})):r.createElement(c,i({ref:n},u))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var d=2;d<a;d++)i[d]=t[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5784:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return d},default:function(){return c},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return m}});var r=t(3117),o=t(102),a=(t(7294),t(3905)),i=t(4996),l=["components"],s={id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},d=void 0,u={unversionedId:"job",id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",description:"\u5f53\u524d\u6587\u6863\u8fd8\u5728\u7f16\u5199\u4e2d\uff0c\u5df2\u5b8c\u6210\u4e86 90%\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\u3002",source:"@site/docs/job.mdx",sourceDirName:".",slug:"/job",permalink:"/docs/job",draft:!1,editUrl:"https://gitee.com/dotnetchina/Furion/tree/v4/handbook/docs/job.mdx",tags:[],version:"current",lastUpdatedBy:"MonkSoul",lastUpdatedAt:1669088758,formattedLastUpdatedAt:"Nov 22, 2022",frontMatter:{id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},sidebar:"docs",previous:{title:"25. \u8f85\u52a9\u89d2\u8272\u670d\u52a1 (Worker Service)",permalink:"/docs/process-service"},next:{title:"26.2 Cron \u8868\u8fbe\u5f0f",permalink:"/docs/cron"}},p={},m=[{value:"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",level:2},{value:"26.1.2 \u5feb\u901f\u5165\u95e8",id:"2612-\u5feb\u901f\u5165\u95e8",level:2},{value:"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a <code>Id</code>",id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id",level:3},{value:"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.2.3 <code>\u4e32\u884c</code> \u6267\u884c",id:"26123-\u4e32\u884c-\u6267\u884c",level:3},{value:"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",level:3},{value:"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a",id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a",level:3},{value:"26.1.2.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",id:"26126-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",level:3},{value:"26.1.3 \u4f5c\u4e1a\u4fe1\u606f <code>JobDetail</code> \u53ca\u6784\u5efa\u5668",id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.3.1 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f",id:"26131-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f",level:3},{value:"26.1.3.2 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",id:"26132-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",level:3},{value:"26.1.3.3 \u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",id:"26133-\u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",level:3},{value:"26.1.3.4 \u4f5c\u4e1a\u4fe1\u606f/\u6784\u5efa\u5668\u989d\u5916\u6570\u636e",id:"26134-\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\u989d\u5916\u6570\u636e",level:3},{value:"26.1.3.5 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26135-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f <code>IJob</code>",id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob",level:2},{value:"26.1.4.1 \u5982\u4f55\u5b9a\u4e49",id:"26141-\u5982\u4f55\u5b9a\u4e49",level:3},{value:"26.1.4.2 \u4f9d\u8d56\u6ce8\u5165",id:"26142-\u4f9d\u8d56\u6ce8\u5165",level:3},{value:"26.1.4.3 <code>JobExecutingContext</code> \u4e0a\u4e0b\u6587",id:"26143-jobexecutingcontext-\u4e0a\u4e0b\u6587",level:3},{value:"26.1.4.4 \u4f5c\u4e1a\u88ab\u53d6\u6d88\u5904\u7406",id:"26144-\u4f5c\u4e1a\u88ab\u53d6\u6d88\u5904\u7406",level:3},{value:"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 <code>Trigger</code> \u53ca\u6784\u5efa\u5668",id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.5.1 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26151-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.5.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001",id:"26152-\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001",level:3},{value:"26.1.5.3 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26153-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.4 \u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26154-\u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.5 \u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26155-\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.5.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",id:"26156-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",level:3},{value:"26.1.5.7 \u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26157-\u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.8 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26158-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 <code>Scheduler</code> \u53ca\u6784\u5efa\u5668",id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.6.1 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212",id:"26161-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212",level:3},{value:"26.1.6.2 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",id:"26162-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",level:3},{value:"26.1.6.3 \u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",id:"26163-\u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",level:3},{value:"26.1.6.4 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26164-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.7 \u4f5c\u4e1a\u8c03\u5ea6\u5668 <code>ScheduleOptionsBuilder</code> \u914d\u7f6e\u9009\u9879",id:"2617-\u4f5c\u4e1a\u8c03\u5ea6\u5668-scheduleoptionsbuilder-\u914d\u7f6e\u9009\u9879",level:2},{value:"26.1.7.1 \u5173\u4e8e <code>ScheduleOptionsBuilder</code>",id:"26171-\u5173\u4e8e-scheduleoptionsbuilder",level:3},{value:"26.1.7.2 <code>ScheduleOptionsBuilder</code> \u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5",id:"26172-scheduleoptionsbuilder-\u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5",level:3},{value:"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 <code>IJobMonitor</code>",id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor",level:2},{value:"26.1.8.1 \u5173\u4e8e\u53c2\u6570 <code>JobExecutionContext</code>",id:"26181-\u5173\u4e8e\u53c2\u6570-jobexecutioncontext",level:3},{value:"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 <code>IJobExecutor</code>",id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor",level:2},{value:"26.1.10 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 <code>ISchedulerFactory</code>",id:"26110-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory",level:2},{value:"26.1.10.1 \u67e5\u627e\u6240\u6709\u4f5c\u4e1a",id:"261101-\u67e5\u627e\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.2 \u67e5\u627e\u4e0b\u4e00\u4e2a\u89e6\u53d1\u7684\u4f5c\u4e1a",id:"261102-\u67e5\u627e\u4e0b\u4e00\u4e2a\u89e6\u53d1\u7684\u4f5c\u4e1a",level:3},{value:"26.1.10.3 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a",id:"261103-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a",level:3},{value:"26.1.10.4 \u6dfb\u52a0\u4f5c\u4e1a",id:"261104-\u6dfb\u52a0\u4f5c\u4e1a",level:3},{value:"26.1.10.5 \u66f4\u65b0\u4f5c\u4e1a",id:"261105-\u66f4\u65b0\u4f5c\u4e1a",level:3},{value:"26.1.10.6 \u5220\u9664\u4f5c\u4e1a",id:"261106-\u5220\u9664\u4f5c\u4e1a",level:3},{value:"26.1.10.7 \u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728",id:"261107-\u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728",level:3},{value:"26.1.10.8 \u542f\u52a8\u6240\u6709\u4f5c\u4e1a",id:"261108-\u542f\u52a8\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.9 \u6682\u505c\u6240\u6709\u4f5c\u4e1a",id:"261109-\u6682\u505c\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.10 \u5220\u9664\u6240\u6709\u4f5c\u4e1a",id:"2611010-\u5220\u9664\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.11 \u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668",id:"2611011-\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668",level:3},{value:"26.1.10.12 \u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316",id:"2611012-\u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316",level:3},{value:"26.1.11 \u4f5c\u4e1a\u8ba1\u5212 <code>IScheduler</code>",id:"26111-\u4f5c\u4e1a\u8ba1\u5212-ischeduler",level:2},{value:"26.1.12 \u4f5c\u4e1a\u6301\u4e45\u5316\u5668 <code>IJobPersistence</code>",id:"26112-\u4f5c\u4e1a\u6301\u4e45\u5316\u5668-ijobpersistence",level:2},{value:"26.1.13 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",id:"26113-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",level:2},{value:"26.1.14 \u5982\u4f55\u90e8\u7f72",id:"26114-\u5982\u4f55\u90e8\u7f72",level:2},{value:"26.1.15 \u5e38\u89c1\u95ee\u9898",id:"26115-\u5e38\u89c1\u95ee\u9898",level:2},{value:"26.1.15 \u53cd\u9988\u4e0e\u5efa\u8bae",id:"26115-\u53cd\u9988\u4e0e\u5efa\u8bae",level:2}],g={toc:m};function c(e){var n=e.components,t=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{title:"\u5f53\u524d\u6587\u6863\u8fd8\u672a\u53d1\u5e03",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u5f53\u524d\u6587\u6863\u8fd8\u5728\u7f16\u5199\u4e2d\uff0c\u5df2\u5b8c\u6210\u4e86 90%\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\u3002"))),(0,a.kt)("hr",null),(0,a.kt)("admonition",{title:"4.8.0 \u4ee5\u4e0b\u7248\u672c\u8bf4\u660e",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Furion 4.8.0+")," \u7248\u672c\u91c7\u7528 ",(0,a.kt)("a",{parentName:"strong",href:"https://gitee.com/dotnetchina/Sundial"},"Sundial")," \u5b9a\u65f6\u4efb\u52a1\u66ff\u6362\u539f\u6709\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TaskScheduler")),"\uff0c",(0,a.kt)("a",{parentName:"p",href:"/docs/job-old"},"\u67e5\u770b\u65e7\u6587\u6863"))),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"Furion 4.8.0 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("h2",{id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"},"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u53c8\u79f0\u5b9a\u65f6\u4efb\u52a1\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b9a\u65f6\u4efb\u52a1\u5c31\u662f\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u6216\u7b26\u5408\u67d0\u79cd\u65f6\u95f4\u89c4\u5f8b\u81ea\u52a8\u89e6\u53d1\u5e76\u6267\u884c\u4efb\u52a1\u3002"),(0,a.kt)("img",{src:(0,i.Z)("img/scdr.png")}),(0,a.kt)("h2",{id:"2612-\u5feb\u901f\u5165\u95e8"},"26.1.2 \u5feb\u901f\u5165\u95e8"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,a.kt)("inlineCode",{parentName:"li"},"MyJob"),"\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,9}",showLineNumbers:!0,"{1,9}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"Startup.cs")," \u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"li"},"Schedule")," \u670d\u52a1\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3-4}",showLineNumbers:!0,"{1,3-4}":!0},"services.AddSchedule(options =>\n{\n    // \u6ce8\u518c\u4f5c\u4e1a\uff0c\u5e76\u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\n    options.AddJob<MyJob>(Triggers.Secondly()); // \u8868\u793a\u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,12}",showLineNumbers:!0,"{2,4,6,8,10,12}":!0},"info: 2022-11-17 16:23:56.0166669 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:23:56  * * * * * *\ninfo: 2022-11-17 16:23:57.0125960 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      job1 job1_trigger1 2022/11/17 16:23:57  * * * * * *\ninfo: 2022-11-17 16:23:58.0120379 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:23:58  * * * * * *\ninfo: 2022-11-17 16:23:59.0071986 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 16:23:59  * * * * * *\ninfo: 2022-11-17 16:24:00.0196813 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:24:00  * * * * * *\ninfo: 2022-11-17 16:24:01.0305799 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      job1 job1_trigger1 2022/11/17 16:24:01  * * * * * *\n")),(0,a.kt)("h3",{id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id"},"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"h3"},"Id")),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0d\u6307\u5b9a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"p"},"Id")," \u4f1a\u81ea\u52a8\u751f\u6210 ",(0,a.kt)("inlineCode",{parentName:"p"},"job[\u7f16\u53f7]"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>("myjob", Triggers.Secondly());\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers  {2,4,6,8,10,12}",showLineNumbers:!0,"":!0,"{2,4,6,8,10,12}":!0},"info: 2022-11-17 16:25:44.0339177 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      myjob myjob_trigger1 2022/11/17 16:25:44  * * * * * *\ninfo: 2022-11-17 16:25:45.0064838 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      myjob myjob_trigger1 2022/11/17 16:25:45  * * * * * *\ninfo: 2022-11-17 16:25:46.0186243 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      myjob myjob_trigger1 2022/11/17 16:25:46  * * * * * *\ninfo: 2022-11-17 16:25:47.0175115 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      myjob myjob_trigger1 2022/11/17 16:25:47  * * * * * *\ninfo: 2022-11-17 16:25:48.0304982 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      myjob myjob_trigger1 2022/11/17 16:25:48  * * * * * *\ninfo: 2022-11-17 16:25:49.0070855 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      myjob myjob_trigger1 2022/11/17 16:25:49  * * * * * *\n")),(0,a.kt)("h3",{id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u4e00\u4e2a\u4f5c\u4e1a\u652f\u6301\u591a\u79cd\u89e6\u53d1\u65f6\u95f4\uff0c\u6bd4\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u6bcf\u5206\u949f")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf ",(0,a.kt)("inlineCode",{parentName:"p"},"5\u79d2")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf\u5206\u949f\u7b2c ",(0,a.kt)("inlineCode",{parentName:"p"},"3/7/8\u79d2")," \u6267\u884c\u4e00\u6b21\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-5}",showLineNumbers:!0,"{3-5}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Minutely()   // \u6bcf\u5206\u949f\u5f00\u59cb\n     , Triggers.Period(5000)   // \u6bcf 5 \u79d2\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Triggers.PeriodSeconds(5)\n     , Triggers.Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds));  // \u6bcf\u5206\u949f\u7b2c 3/7/8 \u79d2\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,10,14,18,20}",showLineNumbers:!0,"{2,10,14,18,20}":!0},"info: 2022-11-17 16:45:40.5258191 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger2 2022/11/17 16:45:40  5000ms\ninfo: 2022-11-17 16:45:45.5281473 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      job1 job1_trigger2 2022/11/17 16:45:45  5000ms\ninfo: 2022-11-17 16:45:50.5378417 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:45:50  5000ms\ninfo: 2022-11-17 16:45:55.5436499 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      job1 job1_trigger2 2022/11/17 16:45:55  5000ms\ninfo: 2022-11-17 16:46:00.0253985 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger1 2022/11/17 16:46:00  * * * * *\ninfo: 2022-11-17 16:46:00.5494676 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger2 2022/11/17 16:46:00  5000ms\ninfo: 2022-11-17 16:46:03.0238143 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger3 2022/11/17 16:46:03  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:05.5629293 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger2 2022/11/17 16:46:05  5000ms\ninfo: 2022-11-17 16:46:07.0169836 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger3 2022/11/17 16:46:07  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:08.0128756 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger3 2022/11/17 16:46:08  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:10.5731138 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:46:10  5000ms\ninfo: 2022-11-17 16:46:15.5841547 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger2 2022/11/17 16:46:15  5000ms\ninfo: 2022-11-17 16:46:20.5866898 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:46:20  5000ms\n")),(0,a.kt)("h3",{id:"26123-\u4e32\u884c-\u6267\u884c"},"26.1.2.3 ",(0,a.kt)("inlineCode",{parentName:"h3"},"\u4e32\u884c")," \u6267\u884c"),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u91c7\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5e76\u884c")," \u6267\u884c\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u6267\u884c\u5b8c\u6210\uff0c\u53ea\u8981\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u5c31\u81ea\u52a8\u6267\u884c\uff0c\u4f46\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u5b8c\u6210\u518d\u6267\u884c\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u4e32\u884c\uff0c\u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {12}",showLineNumbers:!0,"{12}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.Delay(2000, stoppingToken); // \u8fd9\u91cc\u6a21\u62df\u8017\u65f6\u64cd\u4f5c\uff0c\u6bd4\u5982\u8017\u65f62\u79d2\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,8,14,20}",showLineNumbers:!0,"{2,8,14,20}":!0},"info: 2022-11-17 16:57:49.0898900 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 16:57:49  * * * * * *\nwarn: 2022-11-17 16:57:50.0322409 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:50: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:51.0099629 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:51: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:52.0192847 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 16:57:52  * * * * * *\nwarn: 2022-11-17 16:57:53.0159256 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:53: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:54.0101172 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:54: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:55.0038536 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 16:57:55  * * * * * *\nwarn: 2022-11-17 16:57:56.0158085 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #16\n      11/17/2022 16:57:56: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:57.0276842 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #16\n      11/17/2022 16:57:57: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:58.0100972 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 16:57:58  * * * * * *\nwarn: 2022-11-17 16:57:59.0149137 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #13\n      11/17/2022 16:57:59: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\n")),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u4f46\u56e0\u4e3a\u8017\u65f6\u5bfc\u81f4",(0,a.kt)("strong",{parentName:"p"},"\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u4f46\u5b9e\u9645\u672a\u80fd\u6267\u884c"),"\u4f1a\u9ed8\u8ba4\u8f93\u51fa ",(0,a.kt)("inlineCode",{parentName:"p"},"warn")," \u8b66\u544a\u65e5\u5fd7\uff0c\u5982\u9700\u5173\u95ed\u53ea\u9700\u8981\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.LogEnabled = false;\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-11-17 17:02:28.0559602 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 17:02:28  * * * * * *\ninfo: 2022-11-17 17:02:31.0183238 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 17:02:31  * * * * * *\ninfo: 2022-11-17 17:02:34.0130555 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 17:02:34  * * * * * *\ninfo: 2022-11-17 17:02:37.0040306 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:02:37  * * * * * *\ninfo: 2022-11-17 17:02:39.0142346 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:02:39  * * * * * *\n")),(0,a.kt)("h3",{id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"},"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86\u56db\u79cd\u65b9\u5f0f\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e00\u79cd\uff1a\u8f93\u51fa\u5b8c\u6574\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"context.ConvertToJSON()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation(context.ConvertToJSON());\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {3,14}",showLineNumbers:!0,"{3,14}":!0},'info: 2022-11-17 17:13:41.0480946 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      {\n        "jobDetail": {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": false,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-11-17T17:13:41.0247430+08:00"\n      },\n        "trigger": {\n        "triggerId": "job1_trigger1",\n        "jobId": "job1",\n        "triggerType": "Furion.Schedule.CronTrigger",\n        "assemblyName": "Furion",\n        "args": "[\\"@secondly\\",0]",\n        "description": null,\n        "status": 2,\n        "startTime": null,\n        "endTime": null,\n        "lastRunTime": "2022-11-17T17:13:41.0000000",\n        "nextRunTime": "2022-11-17T17:13:42.0000000",\n        "numberOfRuns": 1,\n        "maxNumberOfRuns": 0,\n        "numberOfErrors": 0,\n        "maxNumberOfErrors": 0,\n        "numRetries": 0,\n        "retryTimeout": 1000,\n        "startNow": true,\n        "runOnStart": fals,\n        "updatedTime": "2022-11-17T17:13:41.0250214+08:00"\n      }\n      }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e8c\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToJSON()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToJSON()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-15}",showLineNumbers:!0,"{11-12,14-15}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToJSON());\n        _logger.LogInformation(trigger.ConvertToJSON(NamingConventions.UnderScoreCase));    // \u652f\u6301\u4e09\u79cd\u5c5e\u6027\u540d\u8f93\u51fa\u89c4\u5219\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {2-12,14-34}",showLineNumbers:!0,"{2-12,14-34}":!0},'info: 2022-11-17 17:17:15.0441407 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": false,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-11-17T17:17:15.0103913+08:00"\n      }\ninfo: 2022-11-17 17:17:15.0503546 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      {\n        "trigger_id": "job1_trigger1",\n        "job_id": "job1",\n        "trigger_type": "Furion.Schedule.CronTrigger",\n        "assembly_name": "Furion",\n        "args": "[\\"@secondly\\",0]",\n        "description": null,\n        "status": 2,\n        "start_time": null,\n        "end_time": null,\n        "last_run_time": "2022-11-17T17:17:15.0000000",\n        "next_run_time": "2022-11-17T17:17:16.0000000",\n        "number_of_runs": 1,\n        "max_number_of_runs": 0,\n        "number_of_errors": 0,\n        "max_number_of_errors": 0,\n        "num_retries": 0,\n        "retry_timeout": 1000,\n        "start_now": true,\n        "run_on_start": false,\n        "updated_time": "2022-11-17T17:17:15.0109612+08:00"\n      }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e09\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToSQL()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToSQL()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-16}",showLineNumbers:!0,"{11-12,14-16}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToSQL("\u4f5c\u4e1a\u4fe1\u606f\u8868\u540d", PersistenceBehavior.Appended));  // \u8f93\u51fa\u65b0\u589e\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Removed, NamingConventions.Pascal));    // \u8f93\u51fa\u5220\u9664\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Updated, NamingConventions.UnderScoreCase));    // \u8f93\u51fa\u66f4\u65b0\u8bed\u53e5\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,25,28}",showLineNumbers:!0,"{2,25,28}":!0},"info: 2022-11-17 17:35:11.1085426 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      INSERT INTO \u4f5c\u4e1a\u4fe1\u606f\u8868\u540d(\n            [jobId],\n            [groupName],\n            [jobType],\n            [assemblyName],\n            [description],\n            [concurrent],\n            [includeAnnotations],\n            [properties],\n            [updatedTime]\n      )\n      VALUES(\n            'job1',\n            NULL,\n            'MyJob',\n            'ConsoleApp32',\n            NULL,\n            0,\n            0,\n            '{}',\n            '2022/11/17 17:35:11'\n      );\ninfo: 2022-11-17 17:35:11.1150444 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      DELETE FROM \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d\n      WHERE [TriggerId] = 'job1_trigger1' AND [JobId] = 'job1';\ninfo: 2022-11-17 17:35:11.1190961 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      UPDATE \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d\n      SET\n            [trigger_id] = 'job1_trigger1',\n            [job_id] = 'job1',\n            [trigger_type] = 'Furion.Schedule.CronTrigger',\n            [assembly_name] = 'Furion',\n            [args] = '[\"@secondly\",0]',\n            [description] = NULL,\n            [status] = 2,\n            [start_time] = NULL,\n            [end_time] = NULL,\n            [last_run_time] = '2022/11/17 17:35:11',\n            [next_run_time] = '2022/11/17 17:35:12',\n            [number_of_runs] = 1,\n            [max_number_of_runs] = 0,\n            [number_of_errors] = 0,\n            [max_number_of_errors] = 0,\n            [num_retries] = 0,\n            [retry_timeout] = 1000,\n            [start_now] = 1,\n            [run_on_start] = 0,\n            [updated_time] = '2022/11/17 17:35:11'\n      WHERE [trigger_id] = 'job1_trigger1' AND [job_id] = 'job1';\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u56db\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToMonitor()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToMonitor()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-15}",showLineNumbers:!0,"{11-12,14-15}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToMonitor());\n        _logger.LogInformation(trigger.ConvertToMonitor());\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,16}",showLineNumbers:!0,"{2,16}":!0},'info: 2022-11-17 17:39:09.1086517 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 MyJob\n      \u2523\n      \u2523 JobId\uff1a                     job1\n      \u2523 GroupName\uff1a\n      \u2523 JobType\uff1a                   MyJob\n      \u2523 AssemblyName\uff1a              ConsoleApp32\n      \u2523 Description\uff1a\n      \u2523 Concurrent\uff1a                False\n      \u2523 IncludeAnnotations\uff1a        False\n      \u2523 Properties\uff1a                {}\n      \u2523 UpdatedTime\uff1a               2022/11/17 17:39:09\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\ninfo: 2022-11-17 17:39:09.1133162 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 Furion.Schedule.CronTrigger\n      \u2523\n      \u2523 TriggerId\uff1a                job1_trigger1\n      \u2523 JobId\uff1a                    job1\n      \u2523 TriggerType\uff1a              Furion.Schedule.CronTrigger\n      \u2523 AssemblyName\uff1a             Furion\n      \u2523 Args\uff1a                     ["@secondly",0]\n      \u2523 Description\uff1a\n      \u2523 Status\uff1a                   Running\n      \u2523 StartTime\uff1a\n      \u2523 EndTime\uff1a\n      \u2523 LastRunTime\uff1a              2022/11/17 17:39:09\n      \u2523 NextRunTime\uff1a              2022/11/17 17:39:10\n      \u2523 NumberOfRuns\uff1a             1\n      \u2523 MaxNumberOfRuns\uff1a          0\n      \u2523 NumberOfErrors\uff1a           0\n      \u2523 MaxNumberOfErrors\uff1a        0\n      \u2523 NumRetries\uff1a               0\n      \u2523 RetryTimeout\uff1a             1000\n      \u2523 StartNow\uff1a                 True\n      \u2523 RunOnStart\uff1a               False\n      \u2523 UpdatedTime\uff1a              2022/11/17 17:39:09\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n')),(0,a.kt)("h3",{id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a"},"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd0\u884c\u65f6\u5bf9\u4f5c\u4e1a\u52a8\u6001\u7684\u589e\u52a0\uff0c\u66f4\u65b0\uff0c\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u5982\u52a8\u6001\u6dfb\u52a0\u4f5c\u4e1a\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"li"},"services.AddSchedule()")," \u670d\u52a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u53ef\u4ee5\u5b8c\u5168\u52a8\u6001\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u6ce8\u518c\u670d\u52a1\u5373\u53ef\nservices.AddSchedule();\n\n// \u4e5f\u53ef\u4ee5\u90e8\u5206\u9759\u6001\uff0c\u90e8\u5206\u52a8\u6001\u6ce8\u518c\nservices.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.PeriodSeconds(5));\n});\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u6ce8\u5165 ",(0,a.kt)("inlineCode",{parentName:"li"},"ISchedulerFactory")," \u670d\u52a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,11}",showLineNumbers:!0,"{4,11}":!0},'public class YourService: IYourService\n{\n    private readonly ISchedulerFactory _schedulerFactory;\n    public YourService(ISchedulerFactory schedulerFactory)\n    {\n        _schedulerFactory = schedulerFactory;\n    }\n\n    public void AddJob()\n    {\n        _schedulerFactory.AddJob<MyJob>("\u52a8\u6001\u4f5c\u4e1a Id", Triggers.Secondly());\n    }\n}\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,20}",showLineNumbers:!0,"{2,4,6,8,10,20}":!0},"warn: 2022-11-17 17:54:35.2654513 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #5\n      Schedule Hosted Service cancels hibernation.\ninfo: 2022-11-17 17:54:35.2670018 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #5\n      The Scheduler of <\u52a8\u6001\u4f5c\u4e1a Id> successfully added to the schedule.\ninfo: 2022-11-17 17:54:36.0834925 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 17:54:36  5000ms\ninfo: 2022-11-17 17:54:36.0911692 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:36  * * * * * *\ninfo: 2022-11-17 17:54:37.0146251 +08:00 \u661f\u671f\u56db L MyJob[0] #18\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:37  * * * * * *\ninfo: 2022-11-17 17:54:38.0071504 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:38  * * * * * *\ninfo: 2022-11-17 17:54:39.0140840 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:39  * * * * * *\ninfo: 2022-11-17 17:54:40.0173240 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:40  * * * * * *\ninfo: 2022-11-17 17:54:41.0249043 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:41  * * * * * *\ninfo: 2022-11-17 17:54:41.0550205 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:54:41  5000ms\ninfo: 2022-11-17 17:54:42.0171271 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:42  * * * * * *\ninfo: 2022-11-17 17:54:43.0288486 +08:00 \u661f\u671f\u56db L MyJob[0] #18\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:43  * * * * * *\ninfo: 2022-11-17 17:54:44.0092455 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:44  * * * * * *\n")),(0,a.kt)("h3",{id:"26126-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"},"26.1.2.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6846\u67b6\u4e0d\u4f1a\u626b\u63cf ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\uff0c\u4f46\u53ef\u4ee5\u8bbe\u7f6e\u4f5c\u4e1a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations")," \u8fdb\u884c\u542f\u7528\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u542f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"IncludeAnnotations")," \u626b\u63cf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true)\n        , Triggers.PeriodSeconds(5));     // \u8fd9\u91cc\u53ef\u4f20\u53ef\u4e0d\u4f20\uff0c\u4f20\u4e86\u5219\u4f1a\u81ea\u52a8\u8f7d\u5165\u7279\u6027\u548c\u8fd9\u91cc\u914d\u7f6e\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\n});\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"MyJob")," \u4e2d\u6dfb\u52a0\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-2}",showLineNumbers:!0,"{1-2}":!0},'[Minutely]\n[Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,12,14,16,18}",showLineNumbers:!0,"{2,4,6,8,10,12,14,16,18}":!0},"info: 2022-11-18 10:28:56.3382585 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:28:56  5000ms\ninfo: 2022-11-18 10:29:00.0219493 +08:00 \u661f\u671f\u4e94 L MyJob[0] #5\n      job1 job1_trigger2 2022/11/18 10:29:00  * * * * *\ninfo: 2022-11-18 10:29:01.3318716 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:29:01  5000ms\ninfo: 2022-11-18 10:29:03.0127992 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger3 2022/11/18 10:29:03  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:06.3457728 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger1 2022/11/18 10:29:06  5000ms\ninfo: 2022-11-18 10:29:07.0318919 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger3 2022/11/18 10:29:07  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:08.0141479 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      job1 job1_trigger3 2022/11/18 10:29:08  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:11.3468100 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger1 2022/11/18 10:29:11  5000ms\ninfo: 2022-11-18 10:29:16.3504029 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:29:16  5000ms\n")),(0,a.kt)("h2",{id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668"},"26.1.3 \u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"h2"},"JobDetail")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26131-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f"},"26.1.3.1 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7c7b\u578b\u6765\u63cf\u8ff0\u4f5c\u4e1a\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7c7b\u578b\u63d0\u4f9b\u4ee5\u4e0b",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u5c5e\u6027"),"\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u7c7b\u578b"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"GroupName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u7ec4\u540d\u79f0")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobType")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\uff0c\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 ",(0,a.kt)("inlineCode",{parentName:"td"},"FullName"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"AssemblyName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\uff0c\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 ",(0,a.kt)("inlineCode",{parentName:"td"},"Name"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Description")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u63cf\u8ff0\u4fe1\u606f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Concurrent")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:null},"\u63cf\u8ff0\u4fe1\u606f\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"false"),"\uff0c\u90a3\u4e48\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"td"},"\u4e32\u884c")," \u6267\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"IncludeAnnotations")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"false")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u626b\u63cf ",(0,a.kt)("inlineCode",{parentName:"td"},"IJob")," \u5b9e\u73b0\u7c7b ",(0,a.kt)("inlineCode",{parentName:"td"},"[Trigger]")," \u7279\u6027\u89e6\u53d1\u5668")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Properties")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},'"{}"')),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\uff0c\u7531 ",(0,a.kt)("inlineCode",{parentName:"td"},"Dictionary<string, object>")," \u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32\u5b58\u50a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"UpdatedTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u66f4\u65b0\u65f6\u95f4")))),(0,a.kt)("h3",{id:"26132-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"},"26.1.3.2 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8}",showLineNumbers:!0,"{2,5,8}":!0},'// \u6839\u636e IJob \u5b9e\u73b0\u7c7b\u7c7b\u578b\u521b\u5efa\nvar jobBuilder = JobBuilder.Create<MyJob>();\n\n// \u6839\u636e Type \u7c7b\u578b\u521b\u5efa\nvar jobBuilder = JobBuilder.Create(typeof(MyJob));\n\n// \u6839\u636e\u7a0b\u5e8f\u96c6\u540d\u79f0\u548c\u7c7b\u578b\u5b8c\u5168\u9650\u5b9a\u540d\uff08FullName\uff09\u521b\u5efa\nvar jobBuilder = JobBuilder.Create("YourProject", "YourProject.MyJob");\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobDetail")," \u7c7b\u578b\u521b\u5efa"))),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobBuilder = JobBuilder.From(jobDetail);\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-12}",showLineNumbers:!0,"{2-12}":!0},'var jobBuilder = JobBuilder.From(@"\n{\n    ""jobId"": ""job1"",\n    ""groupName"": null,\n    ""jobType"": ""Furion.Application.MyJob"",\n    ""assemblyName"": ""Furion.Application"",\n    ""description"": null,\n    ""concurrent"": true,\n    ""includeAnnotations"": false,\n    ""properties"": ""{}"",\n    ""updatedTime"": ""2022-11-17T09:25:47.0471107+08:00""\n}");\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-12}",showLineNumbers:!0,"{2-12}":!0},'var jobBuilder = JobBuilder.From("""\n{\n    "jobId": "job1",\n    "groupName": null,\n    "jobType": "Furion.Application.MyJob",\n    "assemblyName": "Furion.Application",\n    "description": null,\n    "concurrent": true,\n    "includeAnnotations": false,\n    "properties": "{}",\n    "updatedTime": "2022-11-17T09:25:47.0471107+08:00"\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobBuilder = JobBuilder.Clone(fromJobBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u53ea\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"AssemblyName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JobType"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"GroupName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Description"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Concurrent"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Properties"),"\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"UpdatedTime"),"\u3002"))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"LoadFrom")," \u5b9e\u4f8b\u65b9\u6cd5\u586b\u5145\u5f53\u524d\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobBuilder")))),(0,a.kt)("p",null,"\u6bd4\u5982\u53ef\u4ee5\u4f20\u9012\u533f\u540d\u7c7b\u578b\uff0c\u7c7b\u7c7b\u578b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9,14}",showLineNumbers:!0,"{2,9,14}":!0},'// \u4f1a\u8986\u76d6\u6240\u6709\u76f8\u540c\u7684\u503c\njobBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u63cf\u8ff0",\n      Concurrent = false\n});\n\n// \u652f\u6301\u591a\u4e2a\u586b\u5145\uff0c\u8fd8\u53ef\u4ee5\u914d\u7f6e\u8df3\u8fc7 null \u503c\u8986\u76d6\njobBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      Concurrent = false,\n      IncludeAnnotations = default(object)      // \u4f1a\u8df3\u8fc7\u8d4b\u503c\n}, ignoreNullValue: true);\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002")),(0,a.kt)("h3",{id:"26133-\u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"},"26.1.3.3 \u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u63d0\u4f9b\u4e86\u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u5b8c\u5168\u5339\u914d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Set[\u5c5e\u6027\u540d]")," \u65b9\u6cd5\u6765\u914d\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u5404\u4e2a\u5c5e\u6027\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,16}",showLineNumbers:!0,"{3,16}":!0},'services.AddSchedule(options =>\n{\n    var jobBuilder = JobBuilder.Create<MyJob>()\n        .SetJobId("job1")   // \u4f5c\u4e1a Id\n        .SetGroupName("group1") // \u4f5c\u4e1a\u7ec4\u540d\u79f0\n        .SetJobType("Furion.Application", "Furion.Application.MyJob") // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetJobType<MyJob>()    // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetJobType(typeof(MyJob))  // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetDescription("\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")   // \u4f5c\u4e1a\u63cf\u8ff0\n        .SetConcurrent(false)   // \u5e76\u884c\u8fd8\u662f\u4e32\u884c\u65b9\u5f0f\uff0cfalse \u4e3a \u4e32\u884c\n        .SetIncludeAnnotations(true)    // \u662f\u5426\u626b\u63cf IJob \u7c7b\u578b\u7684\u89e6\u53d1\u5668\u7279\u6027\uff0ctrue \u4e3a \u626b\u63cf\n        .SetProperties("{}")    // \u4f5c\u4e1a\u989d\u5916\u6570\u636e Dictionary<string, object> \u7c7b\u578b\u5e8f\u5217\u5316\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetProperties(new Dictionary<string, object> { { "name", "Furion" } })  // \u4f5c\u4e1a\u7c7b\u578b\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\uff0c\u63a8\u8350\uff01\uff01\uff01\n        ;\n\n    options.AddJob(jobBuilder, Triggers.PeriodSeconds(5));\n});\n')),(0,a.kt)("h3",{id:"26134-\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\u989d\u5916\u6570\u636e"},"26.1.3.4 \u4f5c\u4e1a\u4fe1\u606f/\u6784\u5efa\u5668\u989d\u5916\u6570\u636e"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5728\u4f5c\u4e1a\u8fd0\u884c\u7684\u65f6\u5019\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u6570\u636e\uff0c\u6216\u8005\u5b9e\u73b0\u591a\u4e2a\u89e6\u53d1\u5668\u5171\u4eab\u6570\u636e\uff0c\u7ecf\u5e38\u7528\u4e8e ",(0,a.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u4e2d\uff0c\u540e\u9762\u4e00\u4e2a\u89e6\u53d1\u5668\u9700\u7b49\u5f85\u524d\u4e00\u4e2a\u89e6\u53d1\u5668\u5b8c\u6210\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {13-14,16}",showLineNumbers:!0,"{13-14,16}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n\n        var count = jobDetail.GetProperty<int>("count");\n        jobDetail.AddOrUpdateProperty("count", count + 1);  // \u9012\u589e count\n\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger} {count}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u8fd0\u884c\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-11-18 16:48:35.8308170 +08:00 \u661f\u671f\u4e94 L ConsoleApp32.MyJob[0] #5\n      job1 job1_trigger1 2022/11/18 16:48:35  5000ms 0\ninfo: 2022-11-18 16:48:40.8437231 +08:00 \u661f\u671f\u4e94 L ConsoleApp32.MyJob[0] #8\n      job1 job1_trigger1 2022/11/18 16:48:40  5000ms 1\ninfo: 2022-11-18 16:48:45.8471287 +08:00 \u661f\u671f\u4e94 L ConsoleApp32.MyJob[0] #15\n      job1 job1_trigger1 2022/11/18 16:48:45  5000ms 2\ninfo: 2022-11-18 16:48:50.8607141 +08:00 \u661f\u671f\u4e94 L ConsoleApp32.MyJob[0] #15\n      job1 job1_trigger1 2022/11/18 16:48:50  5000ms 3\ninfo: 2022-11-18 16:48:55.8645520 +08:00 \u661f\u671f\u4e94 L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 16:48:55  5000ms 4\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u63d0\u4f9b\u4e86\u591a\u4e2a\u65b9\u6cd5\u64cd\u4f5c\u989d\u5916\u6570\u636e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14,17,20}",showLineNumbers:!0,"{2,5,8,11,14,17,20}":!0},'// \u67e5\u770b\u6240\u6709\u989d\u5916\u6570\u636e\nvar properties = jobDetail.GetProperties();\n\n// \u67e5\u770b\u5355\u4e2a\u989d\u5916\u6570\u636e\uff0c\u8fd4\u56de object\nvar value = jobBuilder.GetProperty("key");\n\n// \u67e5\u770b\u5355\u4e2a\u989d\u5916\u6570\u636e\u6cdb\u578b\nvar value = jobDetail.GetProperty<int>("key");\n\n// \u6dfb\u52a0\u65b0\u7684\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u5982\u679c\u952e\u5df2\u5b58\u5728\uff0c\u5219\u8df3\u8fc7\njobDetail.AddProperty("key", "Furion").AddProperty("key1", 2);\n\n// \u6dfb\u52a0\u6216\u66f4\u65b0\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u4e0d\u5b58\u5728\u5219\u65b0\u589e\uff0c\u5b58\u5728\u5219\u66ff\u6362\uff0c\u63a8\u8350\njobDetail.AddOrUpdateProperty("key", "Furion").AddOrUpdateProperty("key1", 2);\n\n// \u5220\u9664\u67d0\u4e2a\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u5982\u679c key \u4e0d\u5b58\u5728\u5219\u8df3\u8fc7\njobDetail.RemoveProperty("key").RemoveProperty("key1");\n\n// \u6e05\u7a7a\u6240\u6709\u989d\u5916\u6570\u636e\njobDetail.ClearProperties();\n')),(0,a.kt)("admonition",{title:"\u4f5c\u4e1a\u989d\u5916\u6570\u636e\u7c7b\u578b\u652f\u6301",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4f5c\u4e1a\u989d\u5916\u6570\u636e\u6bcf\u4e00\u9879\u7684\u503c\u53ea\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"int32"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"string"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"bool"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"null")," \u6216\u5b83\u4eec\u7ec4\u6210\u7684\u6570\u7ec4\u7c7b\u578b\u3002")),(0,a.kt)("h3",{id:"26135-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.3.5 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = jobDetail.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers",showLineNumbers:!0},'{\n  "jobId": "job1",\n  "groupName": null,\n  "jobType": "Furion.Application.MyJob",\n  "assemblyName": "Furion.Application",\n  "description": null,\n  "concurrent": true,\n  "includeAnnotations": false,\n  "properties": "{}",\n  "updatedTime": "2022-11-18T22:56:47.4149299+08:00"\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,7,12}",showLineNumbers:!0,"{2,7,12}":!0},'// \u8f93\u51fa\u65b0\u589e SQL\uff0c\u4f7f\u7528 CamelCase \u5c5e\u6027\u547d\u540d\nvar insertSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Appended\n      , NamingConventions.CamelCase);\n\n// \u8f93\u51fa\u5220\u9664 SQL\uff0c\u4f7f\u7528 Pascal \u5c5e\u6027\u547d\u540d\nvar deleteSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Removed\n      , NamingConventions.Pascal);\n\n// \u8f93\u51fa\u66f4\u65b0 SQL\uff0c\u4f7f\u7528 UnderScoreCase \u5c5e\u6027\u547d\u540d\nvar updateSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Updated\n      , NamingConventions.UnderScoreCase);\n')),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,26,30}",showLineNumbers:!0,"{2,26,30}":!0},"-- \u65b0\u589e\u8bed\u53e5\nINSERT INTO tbName(\n      [jobId],\n      [groupName],\n      [jobType],\n      [assemblyName],\n      [description],\n      [concurrent],\n      [includeAnnotations],\n      [properties],\n      [updatedTime]\n)\nVALUES(\n      'job1',\n      NULL,\n      'ConsoleApp13.MyJob',\n      'ConsoleApp13',\n      NULL,\n      1,\n      0,\n      '{}',\n      '2022/11/18 23:16:18'\n);\n\n-- \u5220\u9664\u8bed\u53e5\nDELETE FROM tbName\nWHERE [JobId] = 'job1';\n\n-- \u66f4\u65b0\u8bed\u53e5\nUPDATE tbName\nSET\n      [job_id] = 'job1',\n      [group_name] = NULL,\n      [job_type] = 'ConsoleApp13.MyJob',\n      [assembly_name] = 'ConsoleApp13',\n      [description] = NULL,\n      [concurrent] = 1,\n      [include_annotations] = 0,\n      [properties] = '{}',\n      [updated_time] = '2022/11/18 23:16:18'\nWHERE [job_id] = 'job1';\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var monitor = jobDetail.ConvertToMonitor();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2523 ConsoleApp13.MyJob\n\u2523\n\u2523 jobId\uff1a                     job1\n\u2523 groupName\uff1a\n\u2523 jobType\uff1a                   Furion.Application.MyJob\n\u2523 assemblyName\uff1a              Furion.Application\n\u2523 description\uff1a\n\u2523 concurrent\uff1a                True\n\u2523 includeAnnotations\uff1a        False\n\u2523 properties\uff1a                {}\n\u2523 updatedTime\uff1a               2022/11/18 23:26:47\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n")),(0,a.kt)("h2",{id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob"},"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJob")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u662f\u4f5c\u4e1a\u5177\u4f53\u6267\u884c\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\uff0c\u901a\u5e38\u7531\u7a0b\u5e8f\u5458\u7f16\u5199\uff0c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5fc5\u987b\u5b9e\u73b0 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u63a5\u53e3\u3002"),(0,a.kt)("h3",{id:"26141-\u5982\u4f55\u5b9a\u4e49"},"26.1.4.1 \u5982\u4f55\u5b9a\u4e49"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"public class MyJob : IJob\n{\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        // your code...\n    }\n}\n")),(0,a.kt)("h3",{id:"26142-\u4f9d\u8d56\u6ce8\u5165"},"26.1.4.2 \u4f9d\u8d56\u6ce8\u5165"),(0,a.kt)("p",null,"\u5b9e\u73b0 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u7684\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u9ed8\u8ba4\u6ce8\u518c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5355\u4f8b"),"\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u90a3\u4e48\u53ea\u8981\u662f\u5355\u4f8b\u7684\u670d\u52a1\uff0c\u7686\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u51fd\u6570\u6ce8\u5165"),"\uff0c\u5982\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"ILogger<>"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"IConfiguration"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-4,6-7}",showLineNumbers:!0,"{3-4,6-7}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration)\n    {\n        _logger = logger;\n        _configuration = configuration;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger} {count}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u662f\u975e\u5355\u4f8b\u7684\u63a5\u53e3\uff0c\u5982\u77ac\u65f6\u6216\u8303\u56f4\u670d\u52a1\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IServiceProvder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {5,9,18-19}",showLineNumbers:!0,"{5,9,18-19}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n    private readonly IServiceProvider _serviceProvider;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration\n        , IServiceProvider serviceProvider)\n    {\n        _logger = logger;\n        _configuration = configuration;\n        _serviceProvider = serviceProvider;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        using var serviceScope = _serviceProvider.CreateScope();\n        var repository = serviceScope.ServiceProvider.GetService<IRepository<User>>();\n\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u9488\u5bf9\u9ad8\u9891\u5b9a\u65f6\u4efb\u52a1\uff0c\u6bd4\u5982\u6bcf\u79d2\u6267\u884c\u4e00\u6b21\uff0c\u6216\u8005\u66f4\u9891\u7e41\u7684\u4efb\u52a1"))),(0,a.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u9891\u7e41\u521b\u5efa\u4f5c\u7528\u57df\u548c\u9500\u6bc1\u4f5c\u7528\u57df\uff0c\u53ef\u521b\u5efa\u957f\u8303\u56f4\u7684\u4f5c\u7528\u57df\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5,13,18,25,27}",showLineNumbers:!0,"{1,5,13,18,25,27}":!0},'public class MyJob : IJob, IDisposable\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n    private readonly IServiceScope _serviceScope;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration\n        , IServiceProvider serviceProvider)\n    {\n        _logger = logger;\n        _configuration = configuration;\n        _serviceScope = serviceProvider.CreateScope();\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var repository = _serviceScope.ServiceProvider.GetService<IRepository<User>>();\n\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n\n        await Task.CompletedTask;\n    }\n\n    public void Dispose()\n    {\n        _serviceScope?.Dispose();\n    }\n}\n')),(0,a.kt)("h3",{id:"26143-jobexecutingcontext-\u4e0a\u4e0b\u6587"},"26.1.4.3 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JobExecutingContext")," \u4e0a\u4e0b\u6587"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutingContext")," \u4e0a\u4e0b\u6587\u4f5c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"ExecuteAsync")," \u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u4e2a\u8fd0\u884c\u65f6\u4fe1\u606f\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u5f53\u524d\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trigger"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OccurrenceTime"),"\uff1a\u8c03\u5ea6\u5668\u68c0\u67e5\u65f6\u95f4\uff0c\u6700\u51c6\u786e\u7684\u8bb0\u5f55\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime"),"\uff1a\u5b9e\u9645\u6267\u884c\u65f6\u95f4\uff08\u53ef\u80fd\u5b58\u5728\u8bef\u5dee\uff09"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ConvertToJSON(naming)"),"\uff1a\u5c06\u4f5c\u4e1a\u8ba1\u5212\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32")))),(0,a.kt)("h3",{id:"26144-\u4f5c\u4e1a\u88ab\u53d6\u6d88\u5904\u7406"},"26.1.4.4 \u4f5c\u4e1a\u88ab\u53d6\u6d88\u5904\u7406"),(0,a.kt)("p",null,"\u4e00\u4e0b\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u88ab\u4e34\u65f6\u6682\u505c\u6216\u53d6\u6d88\uff0c\u4f46\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u8fd8\u672a\u5904\u7406\u5b8c\u6210\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u53d6\u6d88\u8fd8\u662f\u7ee7\u7eed\u6267\u884c\uff0c\u5982\u679c\u9009\u62e9\u540c\u6b65\u53d6\u6d88\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,13,18}",showLineNumbers:!0,"{1,13,18}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n       // \u521b\u5efa\u4efb\u52a1\u5173\u8054\u53d6\u6d88 Token\n        var cancellationTokenSource = CancellationTokenSource.CreateLinkedTokenSource(stoppingToken);\n\n        try\n        {\n            // \u4f20\u9012\u7ed9\u5f02\u6b65\u670d\u52a1\n            await todo.SomeMethodAsync(cancellationTokenSource.Token);\n        }\n        catch (Exception ex)\n        {\n            // ...\n        }\n\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n    }\n}\n')),(0,a.kt)("p",null,"\u8fd9\u6837\u5f53\u4f5c\u4e1a\u88ab\u53d6\u6d88\u65f6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"SomeMethodAsync")," \u4e5f\u4f1a\u540c\u6b65\u53d6\u6d88\u3002"),(0,a.kt)("h2",{id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668"},"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"Trigger")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26151-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.5.1 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7c7b\u578b\u6765\u63cf\u8ff0\u4f5c\u4e1a\u5177\u4f53\u7684\u89e6\u53d1\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7c7b\u578b\u63d0\u4f9b\u4ee5\u4e0b",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u5c5e\u6027"),"\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u7c7b\u578b"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerType")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 ",(0,a.kt)("inlineCode",{parentName:"td"},"FullName"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"AssemblyName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\uff0c\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 ",(0,a.kt)("inlineCode",{parentName:"td"},"Name"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Args")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\uff0c\u8fd0\u884c\u65f6\u5c06\u53cd\u5e8f\u5217\u5316\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"object[]")," \u7c7b\u578b\u5e76\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u53c2\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Description")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u63cf\u8ff0\u4fe1\u606f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Status")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerStatus")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Ready")),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"StartTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u8d77\u59cb\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"EndTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u7ed3\u675f\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"LastRunTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NextRunTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumberOfRuns")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u89e6\u53d1\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"MaxNumberOfRuns")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u5927\u89e6\u53d1\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"0"),"\uff1a\u4e0d\u9650\u5236\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"n"),"\uff1aN \u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumberOfErrors")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u51fa\u9519\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"MaxNumberOfErrors")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u5927\u51fa\u9519\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"0"),"\uff1a\u4e0d\u9650\u5236\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"n"),"\uff1aN \u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumRetries")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"int")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u91cd\u8bd5\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"RetryTimeout")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"int")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1000")),(0,a.kt)("td",{parentName:"tr",align:null},"\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\uff0c\u6beb\u79d2\u5355\u4f4d")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"StartNow")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u7acb\u5373\u542f\u52a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"RunOnStart")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"false")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"UpdatedTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u66f4\u65b0\u65f6\u95f4")))),(0,a.kt)("h3",{id:"26152-\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001"},"26.1.5.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001\u6307\u793a\u4e86\u5f53\u524d\u4f5c\u4e1a\u89e6\u53d1\u5668\u7684\u72b6\u6001\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerStatus")," \u679a\u4e3e\u7c7b\u578b\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"uint"),"\uff09\uff0c\u8be5\u7c7b\u578b\u5305\u542b\u4ee5\u4e0b\u679a\u4e3e\u6210\u5458\u3002"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u679a\u4e3e\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u679a\u4e3e\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Backlog")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u79ef\u538b\uff0c\u8d77\u59cb\u65f6\u95f4\u5927\u4e8e\u5f53\u524d\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Ready")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5c31\u7eea")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Running")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"2")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6b63\u5728\u8fd0\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Pause")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"3")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6682\u505c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Blocked")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"4")),(0,a.kt)("td",{parentName:"tr",align:null},"\u963b\u585e\uff0c\u672c\u8be5\u6267\u884c\u4f46\u662f\u6ca1\u6709\u6267\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ErrorToReady")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"5")),(0,a.kt)("td",{parentName:"tr",align:null},"\u7531\u5931\u8d25\u8fdb\u5165\u5c31\u7eea\uff0c\u8fd0\u884c\u9519\u8bef\u5f53\u5e76\u672a\u8d85\u51fa\u6700\u5927\u9519\u8bef\u6570\uff0c\u8fdb\u5165\u4e0b\u4e00\u8f6e\u5c31\u7eea")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Archived")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"6")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5f52\u6863\uff0c\u7ed3\u675f\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Panic")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"7")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5d29\u6e83\uff0c\u9519\u8bef\u6b21\u6570\u8d85\u51fa\u4e86\u6700\u5927\u9519\u8bef\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Overrun")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"8")),(0,a.kt)("td",{parentName:"tr",align:null},"\u8d85\u9650\uff0c\u8fd0\u884c\u6b21\u6570\u8d85\u51fa\u4e86\u6700\u5927\u9650\u5236")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unoccupied")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"9")),(0,a.kt)("td",{parentName:"tr",align:null},"\u65e0\u89e6\u53d1\u65f6\u95f4\uff0c\u4e0b\u4e00\u6b21\u6267\u884c\u65f6\u95f4\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NotStart")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"10")),(0,a.kt)("td",{parentName:"tr",align:null},"\u672a\u542f\u52a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unknown")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"11")),(0,a.kt)("td",{parentName:"tr",align:null},"\u672a\u77e5\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u4f5c\u4e1a\u89e6\u53d1\u5668\u8fd0\u884c\u65f6\u7c7b\u578b\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unhandled")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"12")),(0,a.kt)("td",{parentName:"tr",align:null},"\u672a\u77e5\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\uff0c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u8fd0\u884c\u65f6\u7c7b\u578b\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))))),(0,a.kt)("h3",{id:"26153-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.3 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8}",showLineNumbers:!0,"{2,5,8}":!0},'// \u6839\u636e Trigger \u6d3e\u751f\u7c7b\u7c7b\u578b\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create<PeriodTrigger>();\n\n// \u6839\u636e Type \u7c7b\u578b\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create(typeof(PeriodTrigger));\n\n// \u6839\u636e\u7a0b\u5e8f\u96c6\u540d\u79f0\u548c\u7c7b\u578b\u5b8c\u5168\u9650\u5b9a\u540d\uff08FullName\uff09\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create("Furion", "Furion.Schedule.PeriodTrigger");\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Trigger")," \u7c7b\u578b\u521b\u5efa"))),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggerBuilder = TriggerBuilder.From(trigger);\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-23}",showLineNumbers:!0,"{2-23}":!0},'var triggerBuilder = TriggerBuilder.From(@"\n{\n    ""triggerId"": ""job1_trigger1"",\n    ""triggerType"": ""Furion.Schedule.PeriodSecondsTrigger"",\n    ""assemblyName"": ""Furion"",\n    ""args"": ""[5]"",\n    ""description"": null,\n    ""status"": 2,\n    ""startTime"": null,\n    ""endTime"": null,\n    ""lastRunTime"": ""2022-11-20T18:31:56.6859410+08:00"",\n    ""nextRunTime"": ""2022-11-20T18:32:01.7233546+08:00"",\n    ""numberOfRuns"": 1,\n    ""maxNumberOfRuns"": 0,\n    ""numberOfErrors"": 0,\n    ""maxNumberOfErrors"": 0,\n    ""numRetries"": 0,\n    ""retryTimeout"": 1000,\n    ""startNow"": true,\n    ""runOnStart"": false,\n    ""updatedTime"": ""2022-11-20T18:31:56.7233630+08:00""\n}");\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-23}",showLineNumbers:!0,"{2-23}":!0},'var triggerBuilder = TriggerBuilder.From("""\n{\n    "triggerId": "job1_trigger1",\n    "triggerType": "Furion.Schedule.PeriodSecondsTrigger",\n    "assemblyName": "Furion",\n    "args": "[5]",\n    "description": null,\n    "status": 2,\n    "startTime": null,\n    "endTime": null,\n    "lastRunTime": "2022-11-20T18:31:56.6859410+08:00",\n    "nextRunTime": "2022-11-20T18:32:01.7233546+08:00",\n    "numberOfRuns": 1,\n    "maxNumberOfRuns": 0,\n    "numberOfErrors": 0,\n    "maxNumberOfErrors": 0,\n    "numRetries": 0,\n    "retryTimeout": 1000,\n    "startNow": true,\n    "runOnStart": false,\n    "updatedTime": "2022-11-20T18:31:56.7233630+08:00"\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggerBuilder = TriggerBuilder.Clone(fromTriggerBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u53ea\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"AssemblyName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerType"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Args"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Description"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"StartTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"EndTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"MaxNumberOfRuns"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"MaxNumberOfErrors"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"NumRetries"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"RetryTimeout"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"StartNow"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"RunOnStart"),"\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"Status"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"LastRunTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NextRunTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NumberOfRuns"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NumberOfErrors"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"UpdatedTime"),"\u3002"))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"LoadFrom")," \u5b9e\u4f8b\u65b9\u6cd5\u586b\u5145\u5f53\u524d\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")))),(0,a.kt)("p",null,"\u6bd4\u5982\u53ef\u4ee5\u4f20\u9012\u533f\u540d\u7c7b\u578b\uff0c\u7c7b\u7c7b\u578b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9,14}",showLineNumbers:!0,"{2,9,14}":!0},'// \u4f1a\u8986\u76d6\u6240\u6709\u76f8\u540c\u7684\u503c\ntriggerBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u63cf\u8ff0",\n      StartTime = DateTime.Now\n});\n\n// \u652f\u6301\u591a\u4e2a\u586b\u5145\uff0c\u8fd8\u53ef\u4ee5\u914d\u7f6e\u8df3\u8fc7 null \u503c\u8986\u76d6\ntriggerBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      StartTime = DateTime.Now,\n      LastRunTime = default(DateTime?)      // \u4f1a\u8df3\u8fc7\u8d4b\u503c\n}, ignoreNullValue: true);\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002")),(0,a.kt)("h3",{id:"26154-\u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.4 \u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u5feb\u901f\u5b9e\u73b0\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u5185\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Period\uff08\u95f4\u9694\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Cron\uff08\u8868\u8fbe\u5f0f\uff09")," \u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u7c7b\u578b\u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers")," \u9759\u6001\u7c7b\u521b\u5efa\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c",metastring:"showLineNumbers {2,5,8}",showLineNumbers:!0,"{2,5,8}":!0},'// \u521b\u5efa\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = TriggerBuilder.Period(5000);\n\n// \u521b\u5efa\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = TriggerBuilder.PeriodSeconds(5);\n\n// \u521b\u5efa Cron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = TriggerBuilder.Cron("* * * * *", CronStringFormat.Default);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"Triggers")," \u65b9\u5f0f\uff0c\u63a8\u8350"))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Triggers")," \u5177\u5907 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u6240\u6709\u7684\u9759\u6001\u65b9\u6cd5\uff0c\u53e6\u5916\u8fd8\u6dfb\u52a0\u4e86\u4e0d\u5c11\u66f4\u52a0\u4fbf\u6377\u7684\u9759\u6001\u65b9\u6cd5\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14,17,20,23,26,29}",showLineNumbers:!0,"{2,5,8,11,14,17,20,23,26,29}":!0},'// \u521b\u5efa\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Period(5000);\n\n// \u521b\u5efa\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.PeriodSeconds(5);\n\n// \u521b\u5efa Cron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Cron("* * * * *", CronStringFormat.Default);\n\n// \u521b\u5efa\u6bcf\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Secondly();\n\n// \u521b\u5efa\u6bcf\u5206\u949f\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Minutely();\n\n// \u521b\u5efa\u6bcf\u5c0f\u65f6\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Hourly();\n\n// \u521b\u5efa\u6bcf\u5929\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Daily();\n\n// \u521b\u5efa\u6bcf\u67081\u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Monthly();\n\n// \u521b\u5efa\u6bcf\u5468\u65e5\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Weekly();\n\n// \u521b\u5efa\u6bcf\u5e741\u67081\u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Yearly();\n')),(0,a.kt)("h3",{id:"26155-\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.5.5 \u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u9664\u4e86\u4f7f\u7528\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"PeriodTrigger")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"CronTrigger")," \u4ee5\u5916\uff0c\u53ef\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u53ea\u9700\u8981\u7ee7\u627f ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5e76\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextOccurrence")," \u65b9\u6cd5\u5373\u53ef\uff0c\u5982\u5b9e\u73b0\u4e00\u4e2a\u95f4\u9694\u4e24\u79d2\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"public class TwiceSecondTrigger : Trigger\n{\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(2);\n    }\n}\n")),(0,a.kt)("p",null,"\u4e4b\u540e\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u521b\u5efa\u5373\u53ef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Create<TwiceSecondTrigger>());\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,12}",showLineNumbers:!0,"{2,4,6,8,10,12}":!0},"info: 2022-11-20 21:13:02.4726416 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger1 2022/11/20 21:13:02 ConsoleApp13.TwiceSecondTrigger\ninfo: 2022-11-20 21:13:04.4591328 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger1 2022/11/20 21:13:04 ConsoleApp13.TwiceSecondTrigger\ninfo: 2022-11-20 21:13:06.4677716 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #4\n      job1 job1_trigger1 2022/11/20 21:13:06 ConsoleApp13.TwiceSecondTrigger\ninfo: 2022-11-20 21:13:08.4726987 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #14\n      job1 job1_trigger1 2022/11/20 21:13:08 ConsoleApp13.TwiceSecondTrigger\ninfo: 2022-11-20 21:13:10.4827028 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger1 2022/11/20 21:13:10 ConsoleApp13.TwiceSecondTrigger\ninfo: 2022-11-20 21:13:12.4936247 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #14\n      job1 job1_trigger1 2022/11/20 21:13:12 ConsoleApp13.TwiceSecondTrigger\n")),(0,a.kt)("p",null,"\u53e6\u5916\uff0c\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u8fd8\u652f\u6301\u4f20\u9012\u53c2\u6570\uff1a"),(0,a.kt)("admonition",{title:"\u53c2\u6570\u7279\u522b\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u5305\u542b\u53c2\u6570\uff0c\u90a3\u4e48",(0,a.kt)("strong",{parentName:"p"},"\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6"),"\uff1a"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53c2\u6570\u5fc5\u987b\u901a\u8fc7\u552f\u4e00\u7684\u6784\u9020\u51fd\u6570\u4f20\u5165\uff0c\u6709\u4e14\u6700\u591a\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u6784\u9020\u51fd\u6570")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53c2\u6570\u7684\u7c7b\u578b\u53ea\u80fd\u662f ",(0,a.kt)("inlineCode",{parentName:"strong"},"int"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"string"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"bool"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"null")," \u6216\u7531\u5b83\u4eec\u7ec4\u6210\u7684\u6570\u7ec4\u7c7b\u578b")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5,8,12}",showLineNumbers:!0,"{1,3,5,8,12}":!0},"public class SomeSecondTrigger : Trigger\n{\n    public SomeSecondTrigger(int seconds) // \u652f\u6301\u591a\u4e2a\u53c2\u6570\n    {\n        Seconds = seconds;\n    }\n\n    private int Seconds { get; }\n\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(Seconds);\n    }\n}\n")),(0,a.kt)("p",null,"\u4e4b\u540e\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u521b\u5efa\u5e76\u4f20\u5165\u53c2\u6570\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Create<SomeSecondTrigger>(3)); // 3 \u79d2\u6267\u884c\u4e00\u6b21\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,12}",showLineNumbers:!0,"{2,4,6,8,10,12}":!0},"info: 2022-11-20 21:33:46.3074692 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #4\n      job1 job1_trigger1 2022/11/20 21:33:46 ConsoleApp13.SomeSecondTrigger\ninfo: 2022-11-20 21:33:49.3101667 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger1 2022/11/20 21:33:49 ConsoleApp13.SomeSecondTrigger\ninfo: 2022-11-20 21:33:52.3222046 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #8\n      job1 job1_trigger1 2022/11/20 21:33:52 ConsoleApp13.SomeSecondTrigger\ninfo: 2022-11-20 21:33:55.3270737 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #4\n      job1 job1_trigger1 2022/11/20 21:33:55 ConsoleApp13.SomeSecondTrigger\ninfo: 2022-11-20 21:33:58.3293727 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger1 2022/11/20 21:33:58 ConsoleApp13.SomeSecondTrigger\ninfo: 2022-11-20 21:34:01.3472296 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #4\n      job1 job1_trigger1 2022/11/20 21:34:01 ConsoleApp13.SomeSecondTrigger\n")),(0,a.kt)("p",null,"\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u9664\u4e86\u53ef\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextOccurrence")," \u65b9\u6cd5\u4e4b\u540e\uff0c\u8fd8\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"ShouldRun")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString")," \u65b9\u6cd5\u53ef\u91cd\u5199\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {15,22,24}",showLineNumbers:!0,"{15,22,24}":!0},'public class SomeSecondTrigger : Trigger\n{\n    public SomeSecondTrigger(int seconds)\n    {\n        Seconds = seconds;\n    }\n\n    private int Seconds { get; }\n\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(Seconds);\n    }\n\n    public override bool ShouldRun(JobDetail jobDetail, DateTime startAt)\n    {\n        // \u5728\u8fd9\u91cc\u8fdb\u4e00\u6b65\u63a7\u5236\uff0c\u5982\u679c\u8fd4\u56de false\uff0c\u5219\u4f5c\u4e1a\u89e6\u53d1\u5668\u8df3\u8fc7\u6267\u884c\n\n        return base.ShouldRun(jobDetail, startAt);\n    }\n\n    public override string ToString()\n    {\n        return $"\u81ea\u5b9a\u4e49\u9012\u589e {Seconds}s \u89e6\u53d1\u5668";\n    }\n}\n')),(0,a.kt)("p",null,"\u63a8\u8350\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextRunTime")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString")," \u65b9\u6cd5\u5373\u53ef\uff0c\u5982\u679c\u91cd\u5199\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString")," \u65b9\u6cd5\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7 $",(0,a.kt)("inlineCode",{parentName:"p"},"{trigger}")," \u8f93\u51fa\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-20 21:43:07.4570694 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #4\n      job1 job1_trigger1 2022/11/20 21:43:07 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\ninfo: 2022-11-20 21:43:10.4629078 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger1 2022/11/20 21:43:10 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\n")),(0,a.kt)("h3",{id:"26156-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"},"26.1.5.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("p",null,"\u5982\u679c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u914d\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations")," \u53c2\u6570\u4e14\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u90a3\u4e48\u5c06\u4f1a\u81ea\u52a8\u89e3\u6790 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u7684\u5b9e\u73b0\u7c7b\u578b\u7684\u6240\u6709\u7ee7\u627f ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerAttribute")," \u7684\u7279\u6027\uff0c\u76ee\u524d\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u5185\u7f6e\u4e86\u4ee5\u4e0b\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Period(5000)]"),"\uff1a\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[PeriodSeconds(5)]"),"\uff1a\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'[Cron("* * * * *", CronStringFormat.Default]'),"\uff1aCron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Secondly]"),"\uff1a\u6bcf\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Minutely]"),"\uff1a\u6bcf\u5206\u949f\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Hourly]"),"\uff1a\u6bcf\u5c0f\u65f6\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Daily]"),"\uff1a\u6bcf\u5929\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Monthly]"),"\uff1a\u6bcf\u6708 1 \u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Weekly]"),"\uff1a\u6bcf\u5468\u65e5\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Yearly]"),"\uff1a\u6bcf\u5e74 1 \u6708 1 \u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027")),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,6}",showLineNumbers:!0,"{3,6}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true));\n\n    // \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u914d\u7f6e + \u7279\u6027\u626b\u63cf\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true)\n                  , Triggers.PeriodSeconds(5));\n});\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-3}",showLineNumbers:!0,"{1-3}":!0},'[Minutely]\n[PeriodSeconds(5)]\n[Cron("* * * * *")]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-11-20 22:10:54.5027217 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger2 2022/11/20 22:10:54  5000ms\ninfo: 2022-11-20 22:10:59.4948832 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger2 2022/11/20 22:10:59  5000ms\ninfo: 2022-11-20 22:11:00.0353681 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger3 2022/11/20 22:11:00  * * * * *\ninfo: 2022-11-20 22:11:00.0372492 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #8\n      job1 job1_trigger1 2022/11/20 22:11:00  * * * * *\ninfo: 2022-11-20 22:11:04.5094807 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #8\n      job1 job1_trigger2 2022/11/20 22:11:04  5000ms\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u9664\u4e86\u4f7f\u7528\u5185\u7f6e\u7279\u6027\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),"\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,2,5}",showLineNumbers:!0,"{1,2,5}":!0},"[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]\npublic class SomeSecondAttribute : TriggerAttribute\n{\n    public SomeSecondAttribute(int seconds)\n        : base(typeof(SomeSecondTrigger), seconds)\n    {\n    }\n}\n")),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},'[SomeSecond(3)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-11-20 22:16:22.0933295 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger1 2022/11/20 22:16:22 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\ninfo: 2022-11-20 22:16:25.0823563 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #8\n      job1 job1_trigger1 2022/11/20 22:16:25 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\ninfo: 2022-11-20 22:16:28.0910993 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger1 2022/11/20 22:16:28 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\ninfo: 2022-11-20 22:16:31.0937955 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #9\n      job1 job1_trigger1 2022/11/20 22:16:31 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\ninfo: 2022-11-20 22:16:34.1034905 +08:00 \u661f\u671f\u65e5 L ConsoleApp13.MyJob[0] #6\n      job1 job1_trigger1 2022/11/20 22:16:34 \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u8fd8\u63d0\u4f9b\u4e86\u591a\u4e2a\u5c5e\u6027\u914d\u7f6e"),"\uff0c\u5982\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668 Id\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Description"),"\uff1a\u63cf\u8ff0\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"StartTime"),"\uff1a\u8d77\u59cb\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"EndTime"),"\uff1a\u7ed3\u675f\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MaxNumberOfRuns"),"\uff1a\u6700\u5927\u89e6\u53d1\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"long")," \u7c7b\u578b\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"0"),"\uff1a\u4e0d\u9650\u5236\uff1b",(0,a.kt)("inlineCode",{parentName:"li"},"n"),"\uff1aN \u6b21"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MaxNumberOfErrors"),"\uff1a\u6700\u5927\u51fa\u9519\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"long")," \u7c7b\u578b\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"0"),"\uff1a\u4e0d\u9650\u5236\uff1b",(0,a.kt)("inlineCode",{parentName:"li"},"n"),"\uff1aN \u6b21"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NumRetries"),"\uff1a\u91cd\u8bd5\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"int")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RetryTimeout"),"\uff1a\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"int")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"1000")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"StartNow"),"\uff1a\u662f\u5426\u7acb\u5373\u542f\u52a8\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"true")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RunOnStart"),"\uff1a\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"false"))),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},'[PeriodSeconds(5, TriggerId = "trigger1", Description = "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")]\npublic class MyJob : IJob\n{\n')),(0,a.kt)("h3",{id:"26157-\u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.7 \u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u63d0\u4f9b\u4e86\u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5b8c\u5168\u5339\u914d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Set[\u5c5e\u6027\u540d]")," \u65b9\u6cd5\u6765\u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u5404\u4e2a\u5c5e\u6027\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,26}",showLineNumbers:!0,"{3,26}":!0},' services.AddSchedule(options =>\n {\n     var triggerBuilder = Triggers.Period(5000)\n         .SetTriggerId("trigger1")   // \u4f5c\u4e1a\u89e6\u53d1\u5668 Id\n         .SetTriggerType("Furion", "Furion.Schedule.PeriodTrigger")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetTriggerType<PeriodTrigger>()    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetTriggerType(typeof(PeriodTrigger))  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetArgs("[5000]")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetArgs(5000)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetDescription("\u4f5c\u4e1a\u89e6\u53d1\u5668\u63cf\u8ff0")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u63cf\u8ff0\n         .SetStatus(TriggerStatus.Ready) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001\n         .SetStartTime(DateTime.Now) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u8d77\u59cb\u65f6\u95f4\n         .SetEndTime(DateTime.Now.AddMonths(1)) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7ed3\u675f\u65f6\u95f4\n         .SetLastRunTime(DateTime.Now.AddSeconds(-5))    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4\n         .SetNextRunTime(DateTime.Now.AddSeconds(5)) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4\n         .SetNumberOfRuns(1) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u89e6\u53d1\u6b21\u6570\n         .SetMaxNumberOfRuns(100)    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u5927\u89e6\u53d1\u5668\u6b21\u6570\n         .SetNumberOfErrors(1)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u51fa\u9519\u6b21\u6570\n         .SetMaxNumberOfErrors(100)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u5927\u51fa\u9519\u6b21\u6570\n         .SetNumRetries(3)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u51fa\u9519\u91cd\u8bd5\u6b21\u6570\n         .SetRetryTimeout(1000)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\n         .SetStartNow(true)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u7acb\u5373\u542f\u52a8\n         .SetRunOnStart(false)    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\n         ;\n\n     options.AddJob<MyJob>(triggerBuilder);\n });\n')),(0,a.kt)("h3",{id:"26158-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.5.8 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = trigger.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers",showLineNumbers:!0},'{\n  "triggerId": "job1_trigger1",\n  "jobId": "job1",\n  "triggerType": "Furion.Schedule.PeriodSecondsTrigger",\n  "assemblyName": "Furion",\n  "args": "[5]",\n  "description": null,\n  "status": 2,\n  "startTime": null,\n  "endTime": null,\n  "lastRunTime": "2022-11-20T22:25:03.8176033+08:00",\n  "nextRunTime": "2022-11-20T22:25:08.8385903+08:00",\n  "numberOfRuns": 1,\n  "maxNumberOfRuns": 0,\n  "numberOfErrors": 0,\n  "maxNumberOfErrors": 0,\n  "numRetries": 0,\n  "retryTimeout": 1000,\n  "startNow": true,\n  "runOnStart": false,\n  "updatedTime": "2022-11-20T22:25:03.8386511+08:00"\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,7,12}",showLineNumbers:!0,"{2,7,12}":!0},'// \u8f93\u51fa\u65b0\u589e SQL\uff0c\u4f7f\u7528 CamelCase \u5c5e\u6027\u547d\u540d\nvar insertSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Appended\n      , NamingConventions.CamelCase);\n\n// \u8f93\u51fa\u5220\u9664 SQL\uff0c\u4f7f\u7528 Pascal \u5c5e\u6027\u547d\u540d\nvar deleteSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Removed\n      , NamingConventions.Pascal);\n\n// \u8f93\u51fa\u66f4\u65b0 SQL\uff0c\u4f7f\u7528 UnderScoreCase \u5c5e\u6027\u547d\u540d\nvar updateSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Updated\n      , NamingConventions.UnderScoreCase);\n')),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,48,52}",showLineNumbers:!0,"{2,48,52}":!0},"-- \u65b0\u589e\u8bed\u53e5\nINSERT INTO tbName(\n      [triggerId],\n      [jobId],\n      [triggerType],\n      [assemblyName],\n      [args],\n      [description],\n      [status],\n      [startTime],\n      [endTime],\n      [lastRunTime],\n      [nextRunTime],\n      [numberOfRuns],\n      [maxNumberOfRuns],\n      [numberOfErrors],\n      [maxNumberOfErrors],\n      [numRetries],\n      [retryTimeout],\n      [startNow],\n      [runOnStart],\n      [updatedTime]\n)\nVALUES(\n      'job1_trigger1',\n      'job1',\n      'Furion.Schedule.PeriodSecondsTrigger',\n      'Furion',\n      '[5]',\n      NULL,\n      2,\n      NULL,\n      NULL,\n      '2022/11/20 22:27:47',\n      '2022/11/20 22:27:52',\n      1,\n      0,\n      0,\n      0,\n      0,\n      1000,\n      1,\n      0,\n      '2022/11/20 22:27:47'\n);\n\n-- \u5220\u9664\u8bed\u53e5\nDELETE FROM tbName\nWHERE [TriggerId] = 'job1_trigger1' AND [JobId] = 'job1';\n\n-- \u66f4\u65b0\u8bed\u53e5\nUPDATE tbName\nSET\n      [trigger_id] = 'job1_trigger1',\n      [job_id] = 'job1',\n      [trigger_type] = 'Furion.Schedule.PeriodSecondsTrigger',\n      [assembly_name] = 'Furion',\n      [args] = '[5]',\n      [description] = NULL,\n      [status] = 2,\n      [start_time] = NULL,\n      [end_time] = NULL,\n      [last_run_time] = '2022/11/20 22:27:47',\n      [next_run_time] = '2022/11/20 22:27:52',\n      [number_of_runs] = 1,\n      [max_number_of_runs] = 0,\n      [number_of_errors] = 0,\n      [max_number_of_errors] = 0,\n      [num_retries] = 0,\n      [retry_timeout] = 1000,\n      [start_now] = 1,\n      [run_on_start] = 0,\n      [updated_time] = '2022/11/20 22:27:47'\nWHERE [trigger_id] = 'job1_trigger1' AND [job_id] = 'job1';\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var monitor = trigger.ConvertToMonitor();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2523 Furion.Schedule.PeriodSecondsTrigger\n\u2523\n\u2523 triggerId\uff1a                job1_trigger1\n\u2523 jobId\uff1a                    job1\n\u2523 triggerType\uff1a              Furion.Schedule.PeriodSecondsTrigger\n\u2523 assemblyName\uff1a             Furion\n\u2523 args\uff1a                     [5]\n\u2523 description\uff1a\n\u2523 status\uff1a                   Running\n\u2523 startTime\uff1a\n\u2523 endTime\uff1a\n\u2523 lastRunTime\uff1a              2022/11/20 22:30:41\n\u2523 nextRunTime\uff1a              2022/11/20 22:30:46\n\u2523 numberOfRuns\uff1a             1\n\u2523 maxNumberOfRuns\uff1a          0\n\u2523 numberOfErrors\uff1a           0\n\u2523 maxNumberOfErrors\uff1a        0\n\u2523 numRetries\uff1a               0\n\u2523 retryTimeout\uff1a             1000\n\u2523 startNow\uff1a                 True\n\u2523 runOnStart\uff1a               False\n\u2523 updatedTime\uff1a              2022/11/20 22:30:41\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n")),(0,a.kt)("h2",{id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668"},"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"h2"},"Scheduler")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26161-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212"},"26.1.6.1 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212"),(0,a.kt)("p",null,"\u6240\u8c13\u7684\u4f5c\u4e1a\u8ba1\u5212\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler"),"\uff09\u662f\u5c06\u4f5c\u4e1a\u4fe1\u606f(",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail"),"\uff09\uff0c\u4f5c\u4e1a\u89e6\u53d1\u5668\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger"),"\uff09\u548c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"IJob"),"\uff09\u5173\u8054\u8d77\u6765\uff0c\u5e76\u6dfb\u52a0\u5230\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4e2d\u7b49\u5f85\u8c03\u5ea6\u6267\u884c\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e3a\u8ba1\u5212\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler"),"\uff09\u7c7b\u578b\u5bf9\u5916\u662f\u4e0d\u516c\u5f00\u7684\uff0c\u4f46\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"IScheduler")," \u63a5\u53e3\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,a.kt)("h3",{id:"26162-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"},"26.1.6.2 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9}",showLineNumbers:!0,"{2,9}":!0},"// \u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u5fc5\u987b\u4f20\u5165 JoBuilder \u548c 0\u62161\u4e2a\u4ee5\u4e0a\u7684 TiggerBuilder\nvar schedulerBuilder = SchedulerBuilder.Create(\n            JobBuilder.Create<MyJob>()\n            , Triggers.PeriodSeconds(5), Triggers.Minutely());\n\n// \u6dfb\u52a0\u5230\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4e2d\nservices.AddSchedule(options =>\n{\n      options.AddJob(schedulerBuilder);\n});\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,14,42}",showLineNumbers:!0,"{1,3,14,42}":!0},'var schedulerBuilder = SchedulerBuilder.From(@"\n{\n    ""jobDetail"": {\n        ""jobId"": ""job1"",\n        ""groupName"": null,\n        ""jobType"": ""ConsoleApp32.MyJob"",\n        ""assemblyName"": ""ConsoleApp32"",\n        ""description"": null,\n        ""concurrent"": true,\n        ""includeAnnotations"": false,\n        ""properties"": ""{}"",\n        ""updatedTime"": ""2022-11-17T09:25:47.0471107+08:00""\n    },\n    ""triggers"": [\n        {\n            ""triggerId"": ""job1_trigger1"",\n            ""triggerType"": ""Furion.Schedule.PeriodSecondsTrigger"",\n            ""assemblyName"": ""Furion"",\n            ""args"": ""[5]"",\n            ""description"": null,\n            ""status"": 2,\n            ""startTime"": null,\n            ""endTime"": null,\n            ""lastRunTime"": ""2022-11-20T18:31:56.6859410+08:00"",\n            ""nextRunTime"": ""2022-11-20T18:32:01.7233546+08:00"",\n            ""numberOfRuns"": 1,\n            ""maxNumberOfRuns"": 0,\n            ""numberOfErrors"": 0,\n            ""maxNumberOfErrors"": 0,\n            ""numRetries"": 0,\n            ""retryTimeout"": 1000,\n            ""startNow"": true,\n            ""runOnStart"": false,\n            ""updatedTime"": ""2022-11-20T18:31:56.7233630+08:00""\n        }\n    ]\n}");\n\n// \u6dfb\u52a0\u5230\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4e2d\nservices.AddSchedule(options =>\n{\n      options.AddJob(schedulerBuilder);\n});\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,14}",showLineNumbers:!0,"{1,3,14}":!0},'var schedulerBuilder = SchedulerBuilder.From("""\n{\n    "jobDetail": {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "Furion.Application.MyJob",\n        "assemblyName": "Furion.Application",\n        "description": null,\n        "concurrent": true,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-11-17T09:25:47.0471107+08:00"\n    },\n    "triggers": [\n        {\n            "triggerId": "job1_trigger1",\n            "triggerType": "Furion.Schedule.PeriodSecondsTrigger",\n            "assemblyName": "Furion",\n            "args": "[5]",\n            "description": null,\n            "status": 2,\n            "startTime": null,\n            "endTime": null,\n            "lastRunTime": "2022-11-20T18:31:56.6859410+08:00",\n            "nextRunTime": "2022-11-20T18:32:01.7233546+08:00",\n            "numberOfRuns": 1,\n            "maxNumberOfRuns": 0,\n            "numberOfErrors": 0,\n            "maxNumberOfErrors": 0,\n            "numRetries": 0,\n            "retryTimeout": 1000,\n            "startNow": true,\n            "runOnStart": false,\n            "updatedTime": "2022-11-20T18:31:56.7233630+08:00"\n        }\n    ]\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"SchedulerBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerBuilder = SchedulerBuilder.Clone(fromSchedulerBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u5c06\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilders"),"\uff0c\u540c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Behavior")," \u4f1a\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceBehavior.Appended"),"\u3002")),(0,a.kt)("h3",{id:"26163-\u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"},"26.1.6.3 \u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u63d0\u4f9b\u4e86\u591a\u4e2a\u65b9\u6cd5\u64cd\u4f5c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder"),"\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14,16-17,20,22-23,26,28,30-33,36}",showLineNumbers:!0,"{2,5,8,11,14,16-17,20,22-23,26,28,30-33,36}":!0},'// \u83b7\u53d6\u5f53\u524d\u7684\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\nvar jobBuilder = schedulerBuilder.GetJobBuilder();\n\n// \u66f4\u65b0\u5f53\u524d\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\nschedulerBuilder.UpdateJobBuilder(jobBuilder.SetDescription("\u65b0\u7684\u63cf\u8ff0"));\n\n// \u83b7\u53d6\u6240\u6709\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\u96c6\u5408\nvar triggerBuilders = schedulerBuilder.GetTriggerBuilders();\n\n// \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = schedulerBuilder.GetTriggerBuilder("job1_trigger1");\n\n// \u65b0\u589e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.AddTriggerBuilder(Triggers.Minutely());\n// \u4e5f\u652f\u6301\u94fe\u5f0f\u6dfb\u52a0\u6216\u6dfb\u52a0\u591a\u4e2a\nschedulerBuilder.AddTriggerBuilder(Triggers.Minutely()).AddTriggerBuilder(Trigger.Hourly());\nschedulerBuilder.AddTriggerBuilders(Trigger.Minutely(), Trigger.Hourly());\n\n// \u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.UpdateTriggerBuilder(triggerBuilder.SetDescription("\u65b0\u7684\u89e6\u53d1\u5668\u63cf\u8ff0"));\n// \u4e5f\u652f\u6301\u94fe\u5f0f\u66f4\u65b0\u6216\u66f4\u65b0\u591a\u4e2a\nschedulerBuilder.UpdateTriggerBuilder(triggerBuilder1).UpdateTriggerBuilder(triggerBuilder2);\nschedulerBuilder.UpdateTriggerBuilders(triggerBuilder1, triggerBuilder2);\n\n// \u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.RemoveTriggerBuilder(triggerBuilder);\n// \u53ef\u4ee5\u6839\u636e\u4f5c\u4e1a\u89e6\u53d1\u5668 Id \u5220\u9664\nschedulerBuilder.RemoveTriggerBuilder("job1_trigger1", out var builder);\n// \u4e5f\u652f\u6301\u94fe\u5f0f\u5220\u9664\u6216\u5220\u9664\u591a\u4e2a\nschedulerBuilder.RemoveTriggerBuilder(triggerBuilder1).RemoveTriggerBuilder(triggerBuilder2);\nschedulerBuilder.RemoveTriggerBuilders(triggerBuilder1, triggerBuilder2);\nschedulerBuilder.RemoveTriggerBuilder("job1_trigger1", out var triggerBuilder).RemoveTriggerBuilder("job1_trigger2", out _);\nschedulerBuilder.RemoveTriggerBuilder("job1_trigger1", "job1_trigger2");\n\n// \u6e05\u7a7a\u6240\u6709\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.ClearTriggerBuilders();\n')),(0,a.kt)("p",null,"\u9664\u4e86\u63d0\u4f9b\u4e0a\u9762\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"CURD")," \u64cd\u4f5c\u4ee5\u5916\uff0c\u8fd8\u63d0\u4f9b\u4e86\u53ef\u4ee5\u66f4\u6539 ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u7684",(0,a.kt)("strong",{parentName:"p"},"\u6301\u4e45\u5316\u884c\u4e3a"),"\u7684\u65b9\u6cd5\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u6807\u8bb0\u5f53\u524d\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u4e3a\u65b0\u589e\u72b6\u6001\nschedulerBuilder.Appended();  // \u9ed8\u8ba4\u503c\n// \u6807\u8bb0\u5f53\u524d\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u4e3a\u66f4\u65b0\u72b6\u6001\nschedulerBuilder.Updated();\n// \u6807\u8bb0\u5f53\u524d\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u4e3a\u5220\u9664\u72b6\u6001\nschedulerBuilder.Removed();\n")),(0,a.kt)("h3",{id:"26164-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.6.4 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = schedulerBuilder.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {2,13}",showLineNumbers:!0,"{2,13}":!0},'{\n  "jobDetail": {\n    "jobId": "job1",\n    "groupName": null,\n    "jobType": "Furion.Application.MyJob",\n    "assemblyName": "Furion.Application",\n    "description": null,\n    "concurrent": true,\n    "includeAnnotations": false,\n    "properties": "{}",\n    "updatedTime": "2022-11-17T09:25:47.0471107+08:00"\n  },\n  "triggers": [\n    {\n      "triggerId": "job1_trigger1",\n      "jobId": null,\n      "triggerType": "Furion.Schedule.PeriodSecondsTrigger",\n      "assemblyName": "Furion",\n      "args": "[5]",\n      "description": null,\n      "status": 2,\n      "startTime": null,\n      "endTime": null,\n      "lastRunTime": "2022-11-20T18:31:56.6859410+08:00",\n      "nextRunTime": "2022-11-20T18:32:01.7233546+08:00",\n      "numberOfRuns": 1,\n      "maxNumberOfRuns": 0,\n      "numberOfErrors": 0,\n      "maxNumberOfErrors": 0,\n      "numRetries": 0,\n      "retryTimeout": 1000,\n      "startNow": true,\n      "runOnStart": false,\n      "updatedTime": "2022-11-20T18:31:56.7233630+08:00"\n    }\n  ]\n}\n')),(0,a.kt)("h2",{id:"2617-\u4f5c\u4e1a\u8c03\u5ea6\u5668-scheduleoptionsbuilder-\u914d\u7f6e\u9009\u9879"},"26.1.7 \u4f5c\u4e1a\u8c03\u5ea6\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"ScheduleOptionsBuilder")," \u914d\u7f6e\u9009\u9879"),(0,a.kt)("h3",{id:"26171-\u5173\u4e8e-scheduleoptionsbuilder"},"26.1.7.1 \u5173\u4e8e ",(0,a.kt)("inlineCode",{parentName:"h3"},"ScheduleOptionsBuilder")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ScheduleOptionsBuilder")," \u914d\u7f6e\u9009\u9879\u4e3b\u8981\u662f\u7528\u6765\u521d\u59cb\u5316\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u548c\u4f5c\u4e1a\u8c03\u5ea6\u5668\u76f8\u5173\u914d\u7f6e\u7684\u3002\u53ea\u4f5c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"services.AddSchedule")," \u670d\u52a1\u6ce8\u518c\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,8-9}",showLineNumbers:!0,"{2,8-9}":!0},"// \u901a\u8fc7\u59d4\u6258\u7684\u65b9\u5f0f\u914d\u7f6e\nservices.AddSchedule(options =>\n{\n      // options \u7c7b\u578b\u4e3a ScheduleOptionsBuilder\n});\n\n// \u81ea\u884c\u521b\u5efa\u5bf9\u8c61\u5b9e\u4f8b\u65b9\u5f0f\u914d\u7f6e\nvar scheduleOptionsBuilder = new ScheduleOptionsBuilder();\nservices.AddSchedule(scheduleOptionsBuilder);\n")),(0,a.kt)("h3",{id:"26172-scheduleoptionsbuilder-\u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5"},"26.1.7.2 ",(0,a.kt)("inlineCode",{parentName:"h3"},"ScheduleOptionsBuilder")," \u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5185\u7f6e\u5c5e\u6027\u914d\u7f6e"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,7,10}",showLineNumbers:!0,"{4,7,10}":!0},"services.AddSchedule(options =>\n{\n      // \u662f\u5426\u4f7f\u7528 UTC \u65f6\u95f4\uff0c\u8be5\u914d\u7f6e\u4e3b\u8981\u7528\u6765\u4f5c\u4e3a\u4f5c\u4e1a\u8c03\u5ea6\u5668\u68c0\u67e5\u65f6\u95f4\u683c\u5f0f\u7684\u4f9d\u636e\n      options.UseUtcTimestamp = false;\n\n      // \u662f\u5426\u8f93\u51fa\u4f5c\u4e1a\u8c03\u5ea6\u5668\u65e5\u5fd7\n      options.LogEnabled = true;\n\n      // \u5b9a\u4e49\u672a\u6355\u83b7\u7684\u5f02\u5e38\uff0c\u901a\u5e38\u662f Task \u5f02\u5e38\n      options.UnobservedTaskExceptionHandler = (obj, args) =>\n      {\n      };\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5185\u7f6e\u65b9\u6cd5\u914d\u7f6e"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4-9,12,15,18}",showLineNumbers:!0,"{4-9,12,15,18}":!0},'services.AddSchedule(options =>\n{\n      // \u6dfb\u52a0\u4f5c\u4e1a\n      options.AddJob(schedulerBuilder);\n      options.AddJob(jobBuilder, triggerBuilder, ...);\n      options.AddJob<MyJob>(triggerBuilder, ...);\n      options.AddJob<MyJob>("\u4f5c\u4e1a Id", triggerBuilder, ...);\n      options.AddJob<MyJob>("\u4f5c\u4e1a Id", concurrent: true, triggerBuilder, ...);\n      options.AddJob<MyJob>(concurrent: true, triggerBuilder, ...);\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u76d1\u89c6\u5668\n      options.AddMonitor<YourJobMonitor>();\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u5668\n      options.AddExecutor<YourJobMonitor>();\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668\n      options.AddPersistence<YourJobPersistence>();\n});\n')),(0,a.kt)("h2",{id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor"},"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobMonitor")),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobMonitor")," \u76d1\u89c6\u5668\u63a5\u53e3\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\u53ef\u4ee5\u76d1\u89c6\u6240\u6709\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u4e8b\u4ef6\uff0c\u5305\u62ec ",(0,a.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u4e4b\u524d\u3001\u6267\u884c\u4e4b\u540e\uff0c\u6267\u884c\u5f02\u5e38"),"\u3002"),(0,a.kt)("p",null,"\u5982\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobMonitor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {1,9,15}",showLineNumbers:!0,"":!0,"{1,9,15}":!0},'public class YourJobMonitor : IJobMonitor\n{\n    private readonly ILogger<YourJobMonitor> _logger;\n    public YourJobMonitor(ILogger<YourJobMonitor> logger)\n    {\n        _logger = logger;\n    }\n\n    public Task OnExecutingAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation("\u6267\u884c\u4e4b\u524d\uff1a{JobId} {TriggerId}", context.JobId, context.TriggerId);\n        return Task.CompletedTask;\n    }\n\n    public Task OnExecutedAsync(JobExecutedContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation("\u6267\u884c\u4e4b\u540e\uff1a{JobId} {TriggerId}", context.JobId, context.TriggerId);\n\n        if (context.Exception != null)\n        {\n            _logger.LogError(context.Exception, "\u6267\u884c\u51fa\u9519\u5566\uff1a{JobId} {TriggerId}", context.JobId, context.TriggerId);\n        }\n\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u6700\u540e\uff0c\u5728\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedule")," \u670d\u52a1\u4e2d\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobMonitor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {4}",showLineNumbers:!0,"":!0,"{4}":!0},"services.AddSchedule(options =>\n{\n    // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u76d1\u89c6\u5668\n    builder.AddMonitor<YourJobMonitor>();\n});\n")),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,6}",showLineNumbers:!0,"{2,6}":!0},"info: 2022-11-21 13:41:49.2144716 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #9\n      \u6267\u884c\u4e4b\u524d\uff1ajob1 job1_trigger1\ninfo: 2022-11-21 13:41:49.2216598 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.MyJob[0] #9\n      job1 job1_trigger1 2022/11/21 13:41:49  5000ms\ninfo: 2022-11-21 13:41:49.2249096 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #9\n      \u6267\u884c\u4e4b\u540e\uff1ajob1 job1_trigger1\n")),(0,a.kt)("h3",{id:"26181-\u5173\u4e8e\u53c2\u6570-jobexecutioncontext"},"26.1.8.1 \u5173\u4e8e\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JobExecutionContext")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"IJobMonitor")," \u63d0\u4f9b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"OnExecutingAsync")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"OnExecutedAsync")," \u63a5\u53e3\u65b9\u6cd5\u90fd\u5305\u542b\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"context")," \u53c2\u6570\uff0c\u524d\u8005\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutingContext"),"\uff0c\u540e\u8005\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutedContext"),"\uff0c\u5b83\u4eec\u90fd\u6709\u4e00\u4e2a\u5171\u540c\u7684\u57fa\u7c7b ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutionContext"),"\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutionContext")," \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u516c\u5171\u5c5e\u6027\u548c\u516c\u5171\u65b9\u6cd5:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutionContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u5f53\u524d\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trigger"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OccurrenceTime"),"\uff1a\u8c03\u5ea6\u5668\u68c0\u67e5\u65f6\u95f4\uff0c\u6700\u51c6\u786e\u7684\u8bb0\u5f55\u65f6\u95f4"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutionContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ConvertToJSON(naming)"),"\uff1a\u5c06\u4f5c\u4e1a\u8ba1\u5212\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32")))),(0,a.kt)("p",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext"))," \u5728\u57fa\u7c7b\u57fa\u7840\u4e0a\u62d3\u5c55\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime")," \u5c5e\u6027\uff1a",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime"),"\uff1a\u6267\u884c\u524d\u65f6\u95f4"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutedContext"))," \u5219\u5728\u57fa\u7c7b\u57fa\u7840\u4e0a\u62d3\u5c55\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"ExecutedTime")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Exception")," \u5c5e\u6027\uff1a",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutedTime"),"\uff1a\u6267\u884c\u540e\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Exception"),"\uff1a\u6267\u884c\u5f02\u5e38")))),(0,a.kt)("h2",{id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor"},"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobExecutor")),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobExecutor")," \u6267\u884c\u5668\u63a5\u53e3\uff0c\u53ef\u4ee5\u8ba9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u5904\u7406\u51fd\u6570\u6267\u884c\u7b56\u7565\uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u8d85\u65f6\u63a7\u5236\uff0c\u5931\u8d25\u91cd\u8bd5\u3001\u7194\u65ad\u7b49\u7b49"),"\u3002"),(0,a.kt)("p",null,"\u5982\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobExecutor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {1,3,6-9}",showLineNumbers:!0,"":!0,"{1,3,6-9}":!0},"public class YourJobExecutor : IJobExecutor\n{\n    public async Task ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken)\n    {\n        // \u5b9e\u73b0\u5931\u8d25\u91cd\u8bd5\u7b56\u7565\uff0c\u5982\u5931\u8d25\u91cd\u8bd5 3 \u6b21\n        await Retry.InvokeAsync(async () =>\n        {\n            await jobHandler.ExecuteAsync(context, stoppingToken);\n        }, 3, 1000);\n    }\n}\n")),(0,a.kt)("p",null,"\u63a5\u7740\u6a21\u62df ",(0,a.kt)("inlineCode",{parentName:"p"},"MyJob")," \u6267\u884c\u51fa\u9519\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,14}",showLineNumbers:!0,"{1,14}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n\n        throw new Exception("\u6a21\u62df\u51fa\u9519");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u6700\u540e\uff0c\u5728\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedule")," \u670d\u52a1\u4e2d\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobExecutor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {5}",showLineNumbers:!0,"":!0,"{5}":!0},"services.AddSchedule(options =>\n{\n      options.AddMonitor<YourJobMonitor>();\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u5668\n      options.AddExecutor<YourJobExecutor>();\n      options.AddJob<MyJob>(Triggers.PeriodSeconds(10));\n});\n")),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,5-10,24,26}",showLineNumbers:!0,"{2,5-10,24,26}":!0},"info: 2022-11-21 14:10:33.3382344 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #14\n      \u6267\u884c\u4e4b\u524d\uff1ajob1 job1_trigger1\ninfo: 2022-11-21 14:10:33.3447855 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/21 14:10:33  10000ms\ninfo: 2022-11-21 14:10:34.4217342 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/21 14:10:33  10000ms\ninfo: 2022-11-21 14:10:35.4952165 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/21 14:10:33  10000ms\ninfo: 2022-11-21 14:10:36.5719440 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/21 14:10:33  10000ms\nfail: 2022-11-21 14:10:36.7388113 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #14\n      Error occurred executing job1 job1_trigger1< 10000ms>.\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.Exception: \u6a21\u62df\u51fa\u9519\n         at ConsoleApp32.MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\MyJob.cs:line 19\n         at ConsoleApp32.YourJobExecutor.<>c__DisplayClass0_0.<<ExecuteAsync>b__0>d.MoveNext() in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 18\n      --- End of stack trace from previous location ---\n         at Furion.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy) in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\FriendlyException\\Retry.cs:line 84\n         at Furion.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy) in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\FriendlyException\\Retry.cs:line 95\n         at ConsoleApp32.YourJobExecutor.ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 16\n         at Furion.Schedule.ScheduleHostedService.<>c__DisplayClass16_2.<<BackgroundProcessing>b__1>d.MoveNext() in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 188\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\ninfo: 2022-11-21 14:10:36.7413303 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #14\n      \u6267\u884c\u4e4b\u540e\uff1ajob1 job1_trigger1\nfail: 2022-11-21 14:10:36.7446968 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #14\n      \u6267\u884c\u51fa\u9519\u5566\uff1ajob1 job1_trigger1\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.InvalidOperationException: Error occurred executing job1 job1_trigger1< 10000ms>.\n       ---\x3e System.Exception: \u6a21\u62df\u51fa\u9519\n         at ConsoleApp32.MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\MyJob.cs:line 19\n         at ConsoleApp32.YourJobExecutor.<>c__DisplayClass0_0.<<ExecuteAsync>b__0>d.MoveNext() in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 18\n      --- End of stack trace from previous location ---\n         at Furion.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy) in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\FriendlyException\\Retry.cs:line 84\n         at Furion.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy) in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\FriendlyException\\Retry.cs:line 95\n         at ConsoleApp32.YourJobExecutor.ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 16\n         at Furion.Schedule.ScheduleHostedService.<>c__DisplayClass16_2.<<BackgroundProcessing>b__1>d.MoveNext() in D:\\Workplaces\\OpenSources\\Furion\\framework\\Furion\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 188\n         --- End of inner exception stack trace ---\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n")),(0,a.kt)("h2",{id:"26110-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory"},"26.1.10 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 ",(0,a.kt)("inlineCode",{parentName:"h2"},"ISchedulerFactory")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382\u63d0\u4f9b\u4e86\u7a0b\u5e8f\u8fd0\u884c\u65f6\u64cd\u4f5c\u4f5c\u4e1a\u8c03\u5ea6\u5668\uff0c\u4f5c\u4e1a\u8ba1\u5212\u7b49\u8bf8\u591a\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ISchedulerFactory")," \u88ab\u6ce8\u518c\u4e3a\u5355\u4f8b\u670d\u52a1\uff0c\u5141\u8bb8\u5728\u4efb\u4f55\u53ef\u4f9d\u8d56\u6ce8\u5165\u7684\u670d\u52a1\u83b7\u53d6\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,9}",showLineNumbers:!0,"{4,9}":!0},"public class YourService: IYourService\n{\n    private readonly ISchedulerFactory _schedulerFactory;\n    public YourService(ISchedulerFactory schedulerFactory)\n    {\n        _schedulerFactory = schedulerFactory;\n    }\n\n    public void SomeMethod([FromServices]ISchedulerFactory schedulerFactory)\n    {\n    }\n}\n")),(0,a.kt)("h3",{id:"261101-\u67e5\u627e\u6240\u6709\u4f5c\u4e1a"},"26.1.10.1 \u67e5\u627e\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8-9}",showLineNumbers:!0,"{2,5,8-9}":!0},'// \u8fd4\u56de\u7684\u662f IScheduler \u96c6\u5408\uff0c\u4e0d\u80fd\u8bbf\u95ee JobDetail \u548c Triggers \u5c5e\u6027\nvar jobs = _schedulerFactory.GetJobs();\n\n// \u8fd4\u56de\u7684\u662f SchedulerModel \u96c6\u5408\uff0c\u53ef\u4ee5\u8bbf\u95ee JobDetail \u548c Triggers \u5c5e\u6027\nvar jobsOfModesl = _schedulerFactory.GetJobsOfModels();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u67e5\u627e\nvar jobs = _schedulerFactory.GetJobs("group1");\nvar jobsOfModesl = _schedulerFactory.GetJobsOfModels("group1");\n')),(0,a.kt)("h3",{id:"261102-\u67e5\u627e\u4e0b\u4e00\u4e2a\u89e6\u53d1\u7684\u4f5c\u4e1a"},"26.1.10.2 \u67e5\u627e\u4e0b\u4e00\u4e2a\u89e6\u53d1\u7684\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,9}",showLineNumbers:!0,"{2,5,8,9}":!0},'// \u8fd4\u56de\u7684\u662f IScheduler \u96c6\u5408\uff0c\u4e0d\u80fd\u8bbf\u95ee JobDetail \u548c Triggers \u5c5e\u6027\nvar nextRunJobs = _schedulerFactory.GetNextRunJobs(DateTime.Now);\n\n// \u8fd4\u56de\u7684\u662f SchedulerModel \u96c6\u5408\uff0c\u53ef\u4ee5\u8bbf\u95ee JobDetail \u548c Triggers \u5c5e\u6027\nvar nextRunJobsOfModels = _schedulerFactory.GetNextRunJobsOfModels(DateTime.Now);\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u67e5\u627e\nvar nextRunJobs = _schedulerFactory.GetNextRunJobs("group1");\nvar nextRunJobsOfModels = _schedulerFactory.GetNextRunJobsOfModels("group1");\n')),(0,a.kt)("h3",{id:"261103-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a"},"26.1.10.3 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u5b58\u5728\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.NotFound\nvar scheduleResult = _schedulerFactory.TryGetJob("job1", out var scheduler);\n\n// \u8fd4\u56de IScheduler \u7c7b\u578b\nvar scheduler = _schedulerFactory.GetJob("job1");\n')),(0,a.kt)("h3",{id:"261104-\u6dfb\u52a0\u4f5c\u4e1a"},"26.1.10.4 \u6dfb\u52a0\u4f5c\u4e1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SchedulerBuilder")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar scheduleResult = _schedulerFactory.TryAddJob(schedulerBuilder, out IScheduler scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob(schedulerBuilder);\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobBuilder")," + ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,7}",showLineNumbers:!0,"{2,7}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar schedulerResult = _schedulerFactory.TryAddJob(JobBuilder.Create<MyJob>()\n            , new[] { Triggers.PeriodSeconds(10) }\n            , out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob(JobBuilder.Create<MyJob>()\n            , Triggers.PeriodSeconds(10));\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u6cdb\u578b\u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,6}",showLineNumbers:!0,"{2,6}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar schedulerResult = _schedulerFactory.TryAddJob<MyJob>(new[] { Triggers.PeriodSeconds(10) }\n        , out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob<MyJob>(Triggers.PeriodSeconds(10));\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u6cdb\u578b + ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,6}",showLineNumbers:!0,"{2,6}":!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar schedulerResult = _schedulerFactory.TryAddJob<MyJob>("job1", new[] { Triggers.PeriodSeconds(10) }\n        , out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob<MyJob>("job1", Triggers.PeriodSeconds(10));\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u6cdb\u578b + ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId")," + ",(0,a.kt)("inlineCode",{parentName:"strong"},"Concurrent")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,7}",showLineNumbers:!0,"{2,7}":!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar schedulerResult = _schedulerFactory.TryAddJob<MyJob>("job1", concurrent: true\n        , new[] { Triggers.PeriodSeconds(10) }\n        , out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob<MyJob>("job1", concurrent: true\n        , Triggers.PeriodSeconds(10));\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u6cdb\u578b + ",(0,a.kt)("inlineCode",{parentName:"strong"},"Concurrent")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,7}",showLineNumbers:!0,"{2,7}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar schedulerResult = _schedulerFactory.TryAddJob<MyJob>(concurrent: true\n        , new[] { Triggers.PeriodSeconds(10) }\n        , out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.AddJob<MyJob>(concurrent: true\n        , Triggers.PeriodSeconds(10));\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6dfb\u52a0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-21 16:24:03.5834532 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The Scheduler of <job1> successfully added to the schedule.\nwarn: 2022-11-21 16:24:03.5876747 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #8\n      The JobId of <job1> already exists.\n")),(0,a.kt)("h3",{id:"261105-\u66f4\u65b0\u4f5c\u4e1a"},"26.1.10.5 \u66f4\u65b0\u4f5c\u4e1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SchedulerBuilder")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild\nvar scheduleResult = _schedulerFactory.TryUpdateJob(schedulerBuilder, out IScheduler scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.UpdateJob(schedulerBuilder);\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u66f4\u65b0\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6}",showLineNumbers:!0,"{2,4,6}":!0},"info: 2022-11-21 18:13:13.0098096 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #14\n      The Scheduler of <job1> successfully updated to the schedule.\nwarn: 2022-11-21 18:13:18.0098096 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #14\n      The Scheduler of <job1> is not found.\nwarn: 2022-11-21 18:13:23.0098096 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #14\n      The Scheduler of <job1> update failed.\n")),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u66f4\u65b0\u4f5c\u4e1a\u7684\u80cc\u540e\u884c\u4e3a",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u66f4\u65b0\u4f5c\u4e1a\u9700\u8981\u4f20\u9012 ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetJob(jobId)")," \u83b7\u53d6\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'var schedulerBuilder = _schedulerFactory.GetJob("jobId")?.GetBuilder();\n')),(0,a.kt)("p",{parentName:"admonition"},"\u6b64\u65f6\u5b83\u7684\u5185\u90e8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Behavior")," \u5c5e\u6027\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceBehavior.Updated"),"\uff0c\u4e5f\u5c31\u662f\u66f4\u65b0\u72b6\u6001\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u6784\u5efa\u5668\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u4f1a\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u66f4\u65b0")," \u64cd\u4f5c\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},".Appended()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},".Removed()")," \u65b9\u6cd5\u6807\u8bb0\u4e4b\u540e\uff0c\u90a3\u4e48\u5b83\u7684\u64cd\u4f5c\u884c\u4e3a\u5c31\u53d1\u751f\u53d8\u5316\u4e86\u3002"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Appended()")),"\uff0c\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"schedulerBuilder.Appended();\n")),(0,a.kt)("p",{parentName:"admonition"},"\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e")," \u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5185\u90e8\u4f1a\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"TryAddJob(schedulerBuilder)")," \u64cd\u4f5c\u3002"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Removed()")),"\uff0c\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"schedulerBuilder.Removed();\n")),(0,a.kt)("p",{parentName:"admonition"},"\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5185\u90e8\u4f1a\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"TryRemoveJob(schedulerBuilder)")," \u64cd\u4f5c\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u6bd4\u5982\u4ee5\u4e0b\u7684\u4ee3\u7801\u5b9e\u5219\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u64cd\u4f5c\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,7}",showLineNumbers:!0,"{3,7}":!0},'// \u5b9e\u9645\u505a\u65b0\u589e\u64cd\u4f5c\nvar scheduleResult = _schedulerFactory.TryUpdateJob(\n      SchedulerBuilder.Create(JobBuilder.Create<MyJob>())); // Create \u65b9\u6cd5\u9ed8\u8ba4\u6807\u8bb0\u4e3a Appended\n\n// \u5b9e\u9645\u505a\u5220\u9664\u64cd\u4f5c\nvar schedulerBuilder = _schedulerFactory.GetJob("jobId")?.GetBuilder();\nvar scheduleResult = _schedulerFactory.TryUpdateJob(schedulerBuilder.Removed()); // \u6807\u8bb0\u4e3a Removed\n'))),(0,a.kt)("h3",{id:"261106-\u5220\u9664\u4f5c\u4e1a"},"26.1.10.6 \u5220\u9664\u4f5c\u4e1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild \u6216\u8005 ScheduleResult.NotFound\nvar schedulerResult = _schedulerFactory.TryRemoveJob("job1", out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.RemoveJob("job1");\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IScheduler")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\uff0c\u5982\u679c\u6dfb\u52a0\u6210\u529f\u8fd4\u56de ScheduleResult.Succeed\uff0c\u5426\u5219\u8fd4\u56de ScheduleResult.Faild \u6216\u8005 ScheduleResult.NotFound\nvar schedulerResult = _schedulerFactory.TryRemoveJob(scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u65e0\u9519\u8bef\n_schedulerFactory.RemoveJob(scheduler);\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u5220\u9664\u6210\u529f\u6216\u5931\u8d25\u5206\u522b\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6}",showLineNumbers:!0,"{2,4,6}":!0},"info: 2022-11-22 09:25:17.4763941 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #4\n      The Scheduler of <job1> successfully removed to the schedule.\nwarn: 2022-11-22 09:28:56.2241923 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #9\n      The Scheduler of <job12> is not found.\nwarn: 2022-11-22 09:29:01.2241923 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #9\n      The Scheduler of <job1> remove failed.\n")),(0,a.kt)("h3",{id:"261107-\u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728"},"26.1.10.7 \u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},'var isExist = _schedulerFactory.ContainsJob("job1");\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u67e5\u627e\nvar isExist = _schedulerFactory.ContainsJob("job1", "group1");\n')),(0,a.kt)("h3",{id:"261108-\u542f\u52a8\u6240\u6709\u4f5c\u4e1a"},"26.1.10.8 \u542f\u52a8\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},'_schedulerFactory.StartAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u542f\u52a8\n_schedulerFactory.StartAll("group1");\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u5668\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4}",showLineNumbers:!0,"{2,4}":!0},"info: 2022-11-22 10:48:55.9619596 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #16\n      The <job1_trigger1> trigger for scheduler of <job1> successfully started to the schedule.\nwarn: 2022-11-22 10:48:56.0131304 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #16\n      Schedule Hosted Service cancels hibernation and GC.Collect().\n")),(0,a.kt)("h3",{id:"261109-\u6682\u505c\u6240\u6709\u4f5c\u4e1a"},"26.1.10.9 \u6682\u505c\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.PauseAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u6682\u505c\n _schedulerFactory.PauseAll("group1");\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u5668\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {4,6}",showLineNumbers:!0,"{4,6}":!0},"info: 2022-11-22 11:01:52.0008851 +08:00 \u661f\u671f\u4e8c L ConsoleApp32.MyJob[0] #10\n      job1 job1_trigger1 2022/11/22 11:01:51  5000ms\ninfo: 2022-11-22 11:01:54.5265246 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #15\n      The <job1_trigger1> trigger for scheduler of <job1> successfully paused to the schedule.\nwarn: 2022-11-22 11:01:54.5535267 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #15\n      Schedule Hosted Service cancels hibernation and GC.Collect().\n")),(0,a.kt)("h3",{id:"2611010-\u5220\u9664\u6240\u6709\u4f5c\u4e1a"},"26.1.10.10 \u5220\u9664\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.RemoveAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u5220\u9664\n _schedulerFactory.RemoveAll("group1");\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u5668\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {4,6}",showLineNumbers:!0,"{4,6}":!0},"info: 2022-11-22 11:04:19.4838792 +08:00 \u661f\u671f\u4e8c L ConsoleApp32.MyJob[0] #14\n      job1 job1_trigger1 2022/11/22 11:04:19  5000ms\nwarn: 2022-11-22 11:04:23.0726721 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #9\n      Schedule Hosted Service cancels hibernation and GC.Collect().\ninfo: 2022-11-22 11:04:23.0797010 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #9\n      The Scheduler of <job1> successfully removed to the schedule.\n")),(0,a.kt)("h3",{id:"2611011-\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668"},"26.1.10.11 \u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668"),(0,a.kt)("p",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4f1a\u81ea\u52a8\u7ba1\u7406\u4f11\u7720\u548c\u5524\u9192\uff0c\u4f46\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\u9700\u8981\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668\uff0c\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"_schedulerFactory.CancelSleep();\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u5668\u8f93\u51fa\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2}",showLineNumbers:!0,"{2}":!0},"warn: 2022-11-22 11:04:23.0726721 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #9\n      Schedule Hosted Service cancels hibernation and GC.Collect().\n")),(0,a.kt)("h3",{id:"2611012-\u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316"},"26.1.10.12 \u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316"),(0,a.kt)("p",null,"\u6b64\u64cd\u4f5c\u4f1a\u5f3a\u5236\u89e6\u53d1\u4f5c\u4e1a\u6301\u4e45\u5316\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobPersistence")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"OnChanged")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"OnTriggerChanged")," \u65b9\u6cd5\uff0c\u5e76\u6807\u8bb0\u4f5c\u4e1a\u6301\u4e45\u5316\u884c\u4e3a\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceBehavior.Updated"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},'_schedulerFactory.PersistAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u63a7\u5236\n _schedulerFactory.PersistAll("group1");\n')),(0,a.kt)("h2",{id:"26111-\u4f5c\u4e1a\u8ba1\u5212-ischeduler"},"26.1.11 \u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IScheduler")),(0,a.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,a.kt)("h2",{id:"26112-\u4f5c\u4e1a\u6301\u4e45\u5316\u5668-ijobpersistence"},"26.1.12 \u4f5c\u4e1a\u6301\u4e45\u5316\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobPersistence")),(0,a.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,a.kt)("h2",{id:"26113-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"},"26.1.13 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"),(0,a.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,a.kt)("h2",{id:"26114-\u5982\u4f55\u90e8\u7f72"},"26.1.14 \u5982\u4f55\u90e8\u7f72"),(0,a.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,a.kt)("h2",{id:"26115-\u5e38\u89c1\u95ee\u9898"},"26.1.15 \u5e38\u89c1\u95ee\u9898"),(0,a.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,a.kt)("h2",{id:"26115-\u53cd\u9988\u4e0e\u5efa\u8bae"},"26.1.15 \u53cd\u9988\u4e0e\u5efa\u8bae"),(0,a.kt)("admonition",{title:"\u4e0e\u6211\u4eec\u4ea4\u6d41",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u7ed9 Furion \u63d0 ",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/dotnetchina/Furion/issues/new?issue"},"Issue"),"\u3002")))}c.isMDXComponent=!0}}]);