"use strict";(self.webpackChunkfurion=self.webpackChunkfurion||[]).push([[6494],{3905:function(e,n,o){o.d(n,{Zo:function(){return u},kt:function(){return d}});var t=o(7294);function r(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function i(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?i(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function l(e,n){if(null==e)return{};var o,t,r=function(e,n){if(null==e)return{};var o,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)o=i[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)o=i[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=t.createContext({}),g=function(e){var n=t.useContext(s),o=n;return e&&(o="function"==typeof e?e(n):a(a({},n),e)),o},u=function(e){var n=g(e.components);return t.createElement(s.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var o=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=g(o),d=r,m=c["".concat(s,".").concat(d)]||c[d]||b[d]||i;return o?t.createElement(m,a(a({ref:n},u),{},{components:o})):t.createElement(m,a({ref:n},u))}));function d(e,n){var o=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=o.length,a=new Array(i);a[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var g=2;g<i;g++)a[g]=o[g];return t.createElement.apply(null,a)}return t.createElement.apply(null,o)}c.displayName="MDXCreateElement"},5784:function(e,n,o){o.r(n),o.d(n,{assets:function(){return b},contentTitle:function(){return g},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return c}});var t=o(3117),r=o(102),i=(o(7294),o(3905)),a=o(4996),l=["components"],s={id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},g=void 0,u={unversionedId:"job",id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",description:"\u5f53\u524d\u6587\u6863\u8fd8\u5728\u7f16\u5199\u4e2d\uff0c\u53ea\u5b8c\u6210\u4e86 20%\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\u3002",source:"@site/docs/job.mdx",sourceDirName:".",slug:"/job",permalink:"/docs/job",draft:!1,editUrl:"https://gitee.com/dotnetchina/Furion/tree/v4/handbook/docs/job.mdx",tags:[],version:"current",lastUpdatedBy:"MonkSoul",lastUpdatedAt:1668740795,formattedLastUpdatedAt:"Nov 18, 2022",frontMatter:{id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},sidebar:"docs",previous:{title:"25. \u8f85\u52a9\u89d2\u8272\u670d\u52a1 (Worker Service)",permalink:"/docs/process-service"},next:{title:"26.2 Cron \u8868\u8fbe\u5f0f",permalink:"/docs/cron"}},b={},c=[{value:"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",level:2},{value:"26.1.2 \u5feb\u901f\u5165\u95e8",id:"2612-\u5feb\u901f\u5165\u95e8",level:2},{value:"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a <code>Id</code>",id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id",level:3},{value:"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.2.3 <code>\u4e32\u884c</code> \u6267\u884c",id:"26123-\u4e32\u884c-\u6267\u884c",level:3},{value:"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",level:3},{value:"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a",id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a",level:3},{value:"26.1.2.7 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",id:"26127-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",level:3},{value:"26.1.3 \u4f5c\u4e1a\u4fe1\u606f <code>JobDetail</code> \u53ca\u6784\u5efa\u5668",id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f <code>IJob</code>",id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob",level:2},{value:"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 <code>Trigger</code> \u53ca\u6784\u5efa\u5668",id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 <code>Scheduler</code> \u53ca\u6784\u5efa\u5668",id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.7 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 <code>ISchedulerFactory</code>",id:"2617-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory",level:2},{value:"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 <code>IJobMonitor</code>",id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor",level:2},{value:"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 <code>IJobExecutor</code>",id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor",level:2},{value:"26.1.10 \u4f5c\u4e1a\u683c\u5f0f\u5316\u8f93\u51fa",id:"26110-\u4f5c\u4e1a\u683c\u5f0f\u5316\u8f93\u51fa",level:2},{value:"26.1.11 \u4f5c\u4e1a\u6301\u4e45\u5316\u540c\u6b65",id:"26111-\u4f5c\u4e1a\u6301\u4e45\u5316\u540c\u6b65",level:2},{value:"26.1.12 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",id:"26112-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",level:2},{value:"26.1.13 \u4f5c\u4e1a\u5982\u4f55\u90e8\u7f72",id:"26113-\u4f5c\u4e1a\u5982\u4f55\u90e8\u7f72",level:2},{value:"26.1.14 \u5e38\u89c1\u95ee\u9898",id:"26114-\u5e38\u89c1\u95ee\u9898",level:2},{value:"26.1.15 \u53cd\u9988\u4e0e\u5efa\u8bae",id:"26115-\u53cd\u9988\u4e0e\u5efa\u8bae",level:2}],d={toc:c};function m(e){var n=e.components,o=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,t.Z)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"\u5f53\u524d\u6587\u6863\u8fd8\u672a\u53d1\u5e03",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"\u5f53\u524d\u6587\u6863\u8fd8\u5728\u7f16\u5199\u4e2d\uff0c\u53ea\u5b8c\u6210\u4e86 20%\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\u3002"))),(0,i.kt)("hr",null),(0,i.kt)("admonition",{title:"4.8.0 \u4ee5\u4e0b\u7248\u672c\u8bf4\u660e",type:"warning"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"strong"},"Furion 4.8.0+")," \u7248\u672c\u91c7\u7528 ",(0,i.kt)("a",{parentName:"strong",href:"https://gitee.com/dotnetchina/Sundial"},"Sundial")," \u5b9a\u65f6\u4efb\u52a1\u66ff\u6362\u539f\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"strong"},"TaskScheduler")),"\uff0c",(0,i.kt)("a",{parentName:"p",href:"./job-old"},"\u67e5\u770b\u65e7\u6587\u6863"))),(0,i.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,i.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,i.kt)("inlineCode",{parentName:"p"},"Furion 4.8.0 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,i.kt)("h2",{id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"},"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"),(0,i.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u53c8\u79f0\u5b9a\u65f6\u4efb\u52a1\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b9a\u65f6\u4efb\u52a1\u5c31\u662f\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u6216\u7b26\u5408\u67d0\u79cd\u65f6\u95f4\u89c4\u5f8b\u81ea\u52a8\u89e6\u53d1\u5e76\u6267\u884c\u4efb\u52a1\u3002"),(0,i.kt)("img",{src:(0,a.Z)("img/scdr.png")}),(0,i.kt)("h2",{id:"2612-\u5feb\u901f\u5165\u95e8"},"26.1.2 \u5feb\u901f\u5165\u95e8"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,i.kt)("inlineCode",{parentName:"li"},"MyJob"),"\uff1a")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,9}",showLineNumbers:!0,"{1,9}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"Startup.cs")," \u6ce8\u518c ",(0,i.kt)("inlineCode",{parentName:"li"},"Schedule")," \u670d\u52a1\uff1a")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3-4}",showLineNumbers:!0,"{1,3-4}":!0},"services.AddSchedule(options =>\n{\n    // \u6ce8\u518c\u4f5c\u4e1a\uff0c\u5e76\u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\n    options.AddJob<MyJob>(Triggers.Secondly()); // \u8868\u793a\u6bcf\u79d2\u6267\u884c\n});\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"info: 2022-11-17 16:23:56.0166669 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:23:56  * * * * * *\ninfo: 2022-11-17 16:23:57.0125960 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      job1 job1_trigger1 2022/11/17 16:23:57  * * * * * *\ninfo: 2022-11-17 16:23:58.0120379 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:23:58  * * * * * *\ninfo: 2022-11-17 16:23:59.0071986 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 16:23:59  * * * * * *\ninfo: 2022-11-17 16:24:00.0196813 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger1 2022/11/17 16:24:00  * * * * * *\ninfo: 2022-11-17 16:24:01.0305799 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      job1 job1_trigger1 2022/11/17 16:24:01  * * * * * *\n")),(0,i.kt)("h3",{id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id"},"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"h3"},"Id")),(0,i.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0d\u6307\u5b9a\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"p"},"Id")," \u4f1a\u81ea\u52a8\u751f\u6210 ",(0,i.kt)("inlineCode",{parentName:"p"},"job[\u7f16\u53f7]"),"\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>("myjob", Triggers.Secondly());\n});\n')),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"info: 2022-11-17 16:25:44.0339177 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      myjob myjob_trigger1 2022/11/17 16:25:44  * * * * * *\ninfo: 2022-11-17 16:25:45.0064838 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      myjob myjob_trigger1 2022/11/17 16:25:45  * * * * * *\ninfo: 2022-11-17 16:25:46.0186243 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      myjob myjob_trigger1 2022/11/17 16:25:46  * * * * * *\ninfo: 2022-11-17 16:25:47.0175115 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      myjob myjob_trigger1 2022/11/17 16:25:47  * * * * * *\ninfo: 2022-11-17 16:25:48.0304982 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      myjob myjob_trigger1 2022/11/17 16:25:48  * * * * * *\ninfo: 2022-11-17 16:25:49.0070855 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      myjob myjob_trigger1 2022/11/17 16:25:49  * * * * * *\n")),(0,i.kt)("h3",{id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,i.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u4e00\u4e2a\u4f5c\u4e1a\u652f\u6301\u591a\u79cd\u89e6\u53d1\u65f6\u95f4\uff0c\u6bd4\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"\u6bcf\u5206\u949f")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf ",(0,i.kt)("inlineCode",{parentName:"p"},"5\u79d2")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf\u5206\u949f\u7b2c ",(0,i.kt)("inlineCode",{parentName:"p"},"3/7/8\u79d2")," \u6267\u884c\u4e00\u6b21\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-5}",showLineNumbers:!0,"{3-5}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Minutely()   // \u6bcf\u5206\u949f\u5f00\u59cb\n     , Triggers.Period(5000)   // \u6bcf 5 \u79d2\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Triggers.PeriodSeconds(5)\n     , Triggers.Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds));  // \u6bcf\u5206\u949f\u7b2c 3/7/8 \u79d2\n});\n')),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,10,14,18,20}",showLineNumbers:!0,"{2,10,14,18,20}":!0},"info: 2022-11-17 16:45:40.5258191 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger2 2022/11/17 16:45:40  5000ms\ninfo: 2022-11-17 16:45:45.5281473 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      job1 job1_trigger2 2022/11/17 16:45:45  5000ms\ninfo: 2022-11-17 16:45:50.5378417 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:45:50  5000ms\ninfo: 2022-11-17 16:45:55.5436499 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      job1 job1_trigger2 2022/11/17 16:45:55  5000ms\ninfo: 2022-11-17 16:46:00.0253985 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger1 2022/11/17 16:46:00  * * * * *\ninfo: 2022-11-17 16:46:00.5494676 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      job1 job1_trigger2 2022/11/17 16:46:00  5000ms\ninfo: 2022-11-17 16:46:03.0238143 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger3 2022/11/17 16:46:03  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:05.5629293 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger2 2022/11/17 16:46:05  5000ms\ninfo: 2022-11-17 16:46:07.0169836 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger3 2022/11/17 16:46:07  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:08.0128756 +08:00 \u661f\u671f\u56db L MyJob[0] #14\n      job1 job1_trigger3 2022/11/17 16:46:08  3,7,8 * * * * ?\ninfo: 2022-11-17 16:46:10.5731138 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:46:10  5000ms\ninfo: 2022-11-17 16:46:15.5841547 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger2 2022/11/17 16:46:15  5000ms\ninfo: 2022-11-17 16:46:20.5866898 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger2 2022/11/17 16:46:20  5000ms\n")),(0,i.kt)("h3",{id:"26123-\u4e32\u884c-\u6267\u884c"},"26.1.2.3 ",(0,i.kt)("inlineCode",{parentName:"h3"},"\u4e32\u884c")," \u6267\u884c"),(0,i.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u91c7\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"\u5e76\u884c")," \u6267\u884c\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u6267\u884c\u5b8c\u6210\uff0c\u53ea\u8981\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u5c31\u81ea\u52a8\u6267\u884c\uff0c\u4f46\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u5b8c\u6210\u518d\u6267\u884c\uff0c\u5982\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u4e32\u884c\uff0c\u6bcf\u79d2\u6267\u884c\n});\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {12}",showLineNumbers:!0,"{12}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.Delay(2000, stoppingToken); // \u8fd9\u91cc\u6a21\u62df\u8017\u65f6\u64cd\u4f5c\uff0c\u6bd4\u5982\u8017\u65f62\u79d2\n    }\n}\n')),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,8,14,20}",showLineNumbers:!0,"{2,8,14,20}":!0},"info: 2022-11-17 16:57:49.0898900 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 16:57:49  * * * * * *\nwarn: 2022-11-17 16:57:50.0322409 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:50: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:51.0099629 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:51: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:52.0192847 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 16:57:52  * * * * * *\nwarn: 2022-11-17 16:57:53.0159256 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:53: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:54.0101172 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #8\n      11/17/2022 16:57:54: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:55.0038536 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 16:57:55  * * * * * *\nwarn: 2022-11-17 16:57:56.0158085 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #16\n      11/17/2022 16:57:56: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-11-17 16:57:57.0276842 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #16\n      11/17/2022 16:57:57: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-11-17 16:57:58.0100972 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 16:57:58  * * * * * *\nwarn: 2022-11-17 16:57:59.0149137 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #13\n      11/17/2022 16:57:59: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\n")),(0,i.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u4f46\u56e0\u4e3a\u8017\u65f6\u5bfc\u81f4",(0,i.kt)("strong",{parentName:"p"},"\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u4f46\u5b9e\u9645\u672a\u80fd\u6267\u884c"),"\u4f1a\u9ed8\u8ba4\u8f93\u51fa ",(0,i.kt)("inlineCode",{parentName:"p"},"warn")," \u8b66\u544a\u65e5\u5fd7\uff0c\u5982\u9700\u5173\u95ed\u53ea\u9700\u8981\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.LogEnabled = false;\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u6bcf\u79d2\u6267\u884c\n});\n")),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-11-17 17:02:28.0559602 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 17:02:28  * * * * * *\ninfo: 2022-11-17 17:02:31.0183238 +08:00 \u661f\u671f\u56db L MyJob[0] #8\n      job1 job1_trigger1 2022/11/17 17:02:31  * * * * * *\ninfo: 2022-11-17 17:02:34.0130555 +08:00 \u661f\u671f\u56db L MyJob[0] #13\n      job1 job1_trigger1 2022/11/17 17:02:34  * * * * * *\ninfo: 2022-11-17 17:02:37.0040306 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:02:37  * * * * * *\ninfo: 2022-11-17 17:02:39.0142346 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:02:39  * * * * * *\n")),(0,i.kt)("h3",{id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"},"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"),(0,i.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86\u56db\u79cd\u65b9\u5f0f\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u7b2c\u4e00\u79cd\uff1a\u8f93\u51fa\u5b8c\u6574\u7684\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,i.kt)("inlineCode",{parentName:"strong"},"context.ConvertToJSON()")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation(context.ConvertToJSON());\n        await Task.CompletedTask;\n    }\n}\n")),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {3,14}",showLineNumbers:!0,"{3,14}":!0},'info: 2022-11-17 17:13:41.0480946 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      {\n        "jobDetail": {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": false,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-11-17T17:13:41.0247430+08:00"\n      },\n        "trigger": {\n        "triggerId": "job1_trigger1",\n        "jobId": "job1",\n        "triggerType": "Furion.Schedule.CronTrigger",\n        "assemblyName": "Furion",\n        "args": "[\\"@secondly\\",0]",\n        "description": null,\n        "status": 2,\n        "startTime": null,\n        "endTime": null,\n        "lastRunTime": "2022-11-17T17:13:41.0000000",\n        "nextRunTime": "2022-11-17T17:13:42.0000000",\n        "numberOfRuns": 1,\n        "maxNumberOfRuns": 0,\n        "numberOfErrors": 0,\n        "maxNumberOfErrors": 0,\n        "numRetries": 0,\n        "retryTimeout": 1000,\n        "startNow": true,\n        "updatedTime": "2022-11-17T17:13:41.0250214+08:00"\n      }\n      }\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u7b2c\u4e8c\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,i.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToJSON()")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToJSON()")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-15}",showLineNumbers:!0,"{11-12,14-15}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToJSON());\n        _logger.LogInformation(trigger.ConvertToJSON(NamingConventions.UnderScoreCase));    // \u652f\u6301\u4e09\u79cd\u5c5e\u6027\u540d\u8f93\u51fa\u89c4\u5219\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {2-12,14-34}",showLineNumbers:!0,"{2-12,14-34}":!0},'info: 2022-11-17 17:17:15.0441407 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": false,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-11-17T17:17:15.0103913+08:00"\n      }\ninfo: 2022-11-17 17:17:15.0503546 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      {\n        "trigger_id": "job1_trigger1",\n        "job_id": "job1",\n        "trigger_type": "Furion.Schedule.CronTrigger",\n        "assembly_name": "Furion",\n        "args": "[\\"@secondly\\",0]",\n        "description": null,\n        "status": 2,\n        "start_time": null,\n        "end_time": null,\n        "last_run_time": "2022-11-17T17:17:15.0000000",\n        "next_run_time": "2022-11-17T17:17:16.0000000",\n        "number_of_runs": 1,\n        "max_number_of_runs": 0,\n        "number_of_errors": 0,\n        "max_number_of_errors": 0,\n        "num_retries": 0,\n        "retry_timeout": 1000,\n        "start_now": true,\n        "updated_time": "2022-11-17T17:17:15.0109612+08:00"\n      }\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u7b2c\u4e09\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"strong"},"SQL")," \u4fe1\u606f\uff1a",(0,i.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToSQL()")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToSQL()")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-16}",showLineNumbers:!0,"{11-12,14-16}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToSQL("\u4f5c\u4e1a\u4fe1\u606f\u8868\u540d", PersistenceBehavior.Appended));  // \u8f93\u51fa\u65b0\u589e\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Removed, NamingConventions.CamelCase));    // \u8f93\u51fa\u5220\u9664\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Updated, NamingConventions.UnderScoreCase));    // \u8f93\u51fa\u66f4\u65b0\u8bed\u53e5\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,25,27}",showLineNumbers:!0,"{2,25,27}":!0},"info: 2022-11-17 17:35:11.1085426 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      INSERT INTO \u4f5c\u4e1a\u4fe1\u606f\u8868\u540d(\n      [jobId],\n      [groupName],\n      [jobType],\n      [assemblyName],\n      [description],\n      [concurrent],\n      [includeAnnotations],\n      [properties],\n      [updatedTime]\n      )\n      VALUES(\n      'job1',\n      NULL,\n      'MyJob',\n      'ConsoleApp32',\n      NULL,\n      0,\n      0,\n      '{}',\n      '2022/11/17 17:35:11'\n      );\ninfo: 2022-11-17 17:35:11.1150444 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      DELETE FROM \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d WHERE [TriggerId] = 'job1_trigger1' AND [JobId] = 'job1';\ninfo: 2022-11-17 17:35:11.1190961 +08:00 \u661f\u671f\u56db L MyJob[0] #9\n      UPDATE \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d\n      SET [trigger_id] = 'job1_trigger1',\n      [job_id] = 'job1',\n      [trigger_type] = 'Furion.Schedule.CronTrigger',\n      [assembly_name] = 'Furion',\n      [args] = '[\"@secondly\",0]',\n      [description] = NULL,\n      [status] = 2,\n      [start_time] = NULL,\n      [end_time] = NULL,\n      [last_run_time] = '2022/11/17 17:35:11',\n      [next_run_time] = '2022/11/17 17:35:12',\n      [number_of_runs] = 1,\n      [max_number_of_runs] = 0,\n      [number_of_errors] = 0,\n      [max_number_of_errors] = 0,\n      [num_retries] = 0,\n      [retry_timeout] = 1000,\n      [start_now] = 1,\n      [updated_time] = '2022/11/17 17:35:11'\n      WHERE [trigger_id] = 'job1_trigger1' AND [job_id] = 'job1';\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u7b2c\u56db\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,i.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u4fe1\u606f\uff1a",(0,i.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToMonitor()")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToMonitor()")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-15}",showLineNumbers:!0,"{11-12,14-15}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToMonitor());\n        _logger.LogInformation(trigger.ConvertToMonitor());\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,i.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,16}",showLineNumbers:!0,"{2,16}":!0},'info: 2022-11-17 17:39:09.1086517 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 MyJob\n      \u2523\n      \u2523 JobId\uff1a                     job1\n      \u2523 GroupName\uff1a\n      \u2523 JobType\uff1a                   MyJob\n      \u2523 AssemblyName\uff1a              ConsoleApp32\n      \u2523 Description\uff1a\n      \u2523 Concurrent\uff1a                False\n      \u2523 IncludeAnnotations\uff1a        False\n      \u2523 Properties\uff1a                {}\n      \u2523 UpdatedTime\uff1a               2022/11/17 17:39:09\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\ninfo: 2022-11-17 17:39:09.1133162 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 Furion.Schedule.CronTrigger\n      \u2523\n      \u2523 TriggerId\uff1a                job1_trigger1\n      \u2523 JobId\uff1a                    job1\n      \u2523 TriggerType\uff1a              Furion.Schedule.CronTrigger\n      \u2523 AssemblyName\uff1a             Furion\n      \u2523 Args\uff1a                     ["@secondly",0]\n      \u2523 Description\uff1a\n      \u2523 Status\uff1a                   Running\n      \u2523 StartTime\uff1a\n      \u2523 EndTime\uff1a\n      \u2523 LastRunTime\uff1a              2022/11/17 17:39:09\n      \u2523 NextRunTime\uff1a              2022/11/17 17:39:10\n      \u2523 NumberOfRuns\uff1a             1\n      \u2523 MaxNumberOfRuns\uff1a          0\n      \u2523 NumberOfErrors\uff1a           0\n      \u2523 MaxNumberOfErrors\uff1a        0\n      \u2523 NumRetries\uff1a               0\n      \u2523 RetryTimeout\uff1a             1000\n      \u2523 StartNow\uff1a                 True\n      \u2523 UpdatedTime\uff1a              2022/11/17 17:39:09\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n')),(0,i.kt)("h3",{id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a"},"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a"),(0,i.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd0\u884c\u65f6\u5bf9\u4f5c\u4e1a\u52a8\u6001\u7684\u589e\u52a0\uff0c\u66f4\u65b0\uff0c\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u5982\u52a8\u6001\u6dfb\u52a0\u4f5c\u4e1a\uff1a"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u6ce8\u518c ",(0,i.kt)("inlineCode",{parentName:"li"},"services.AddSchedule()")," \u670d\u52a1")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u53ef\u4ee5\u5b8c\u5168\u52a8\u6001\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u6ce8\u518c\u670d\u52a1\u5373\u53ef\nservices.AddSchedule();\n\n// \u4e5f\u53ef\u4ee5\u90e8\u5206\u9759\u6001\uff0c\u90e8\u5206\u52a8\u6001\u6ce8\u518c\nservices.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.PeriodSeconds(5));\n});\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\u6ce8\u5165 ",(0,i.kt)("inlineCode",{parentName:"li"},"ISchedulerFactory")," \u670d\u52a1")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,11}",showLineNumbers:!0,"{4,11}":!0},'public class YourService: IYourService\n{\n    private readonly ISchedulerFactory _schedulerFactory;\n    public YourService(ISchedulerFactory schedulerFactory)\n    {\n        _schedulerFactory = schedulerFactory;\n    }\n\n    public void AddJob()\n    {\n        _schedulerFactory.AddJob<MyJob>("\u52a8\u6001\u4f5c\u4e1a Id", Triggers.Secondly());\n    }\n}\n')),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,20}",showLineNumbers:!0,"{2,4,6,8,10,20}":!0},"warn: 2022-11-17 17:54:35.2654513 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #5\n      Schedule Hosted Service cancels hibernation.\ninfo: 2022-11-17 17:54:35.2670018 +08:00 \u661f\u671f\u56db L System.Logging.ScheduleService[0] #5\n      The Scheduler of <\u52a8\u6001\u4f5c\u4e1a Id> successfully added to the schedule.\ninfo: 2022-11-17 17:54:36.0834925 +08:00 \u661f\u671f\u56db L MyJob[0] #5\n      job1 job1_trigger1 2022/11/17 17:54:36  5000ms\ninfo: 2022-11-17 17:54:36.0911692 +08:00 \u661f\u671f\u56db L MyJob[0] #3\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:36  * * * * * *\ninfo: 2022-11-17 17:54:37.0146251 +08:00 \u661f\u671f\u56db L MyJob[0] #18\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:37  * * * * * *\ninfo: 2022-11-17 17:54:38.0071504 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:38  * * * * * *\ninfo: 2022-11-17 17:54:39.0140840 +08:00 \u661f\u671f\u56db L MyJob[0] #17\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:39  * * * * * *\ninfo: 2022-11-17 17:54:40.0173240 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:40  * * * * * *\ninfo: 2022-11-17 17:54:41.0249043 +08:00 \u661f\u671f\u56db L MyJob[0] #16\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:41  * * * * * *\ninfo: 2022-11-17 17:54:41.0550205 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      job1 job1_trigger1 2022/11/17 17:54:41  5000ms\ninfo: 2022-11-17 17:54:42.0171271 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:42  * * * * * *\ninfo: 2022-11-17 17:54:43.0288486 +08:00 \u661f\u671f\u56db L MyJob[0] #18\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:43  * * * * * *\ninfo: 2022-11-17 17:54:44.0092455 +08:00 \u661f\u671f\u56db L MyJob[0] #15\n      \u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1 2022/11/17 17:54:44  * * * * * *\n")),(0,i.kt)("h3",{id:"26127-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"},"26.1.2.7 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,i.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6846\u67b6\u4e0d\u4f1a\u626b\u63cf ",(0,i.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\uff0c\u4f46\u53ef\u4ee5\u8bbe\u7f6e\u4f5c\u4e1a\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations")," \u8fdb\u884c\u542f\u7528\u3002"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u542f\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"IncludeAnnotations")," \u626b\u63cf")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true)\n        , Triggers.PeriodSeconds(5));\n});\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"MyJob")," \u4e2d\u6dfb\u52a0\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-2}",showLineNumbers:!0,"{1-2}":!0},'[Minutely]\n[Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10,12,14,16,18}",showLineNumbers:!0,"{2,4,6,8,10,12,14,16,18}":!0},"info: 2022-11-18 10:28:56.3382585 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:28:56  5000ms\ninfo: 2022-11-18 10:29:00.0219493 +08:00 \u661f\u671f\u4e94 L MyJob[0] #5\n      job1 job1_trigger2 2022/11/18 10:29:00  * * * * *\ninfo: 2022-11-18 10:29:01.3318716 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:29:01  5000ms\ninfo: 2022-11-18 10:29:03.0127992 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger3 2022/11/18 10:29:03  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:06.3457728 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger1 2022/11/18 10:29:06  5000ms\ninfo: 2022-11-18 10:29:07.0318919 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger3 2022/11/18 10:29:07  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:08.0141479 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      job1 job1_trigger3 2022/11/18 10:29:08  3,7,8 * * * * ?\ninfo: 2022-11-18 10:29:11.3468100 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      job1 job1_trigger1 2022/11/18 10:29:11  5000ms\ninfo: 2022-11-18 10:29:16.3504029 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      job1 job1_trigger1 2022/11/18 10:29:16  5000ms\n")),(0,i.kt)("h2",{id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668"},"26.1.3 \u4f5c\u4e1a\u4fe1\u606f ",(0,i.kt)("inlineCode",{parentName:"h2"},"JobDetail")," \u53ca\u6784\u5efa\u5668"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob"},"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,i.kt)("inlineCode",{parentName:"h2"},"IJob")),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668"},"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,i.kt)("inlineCode",{parentName:"h2"},"Trigger")," \u53ca\u6784\u5efa\u5668"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668"},"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 ",(0,i.kt)("inlineCode",{parentName:"h2"},"Scheduler")," \u53ca\u6784\u5efa\u5668"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2617-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory"},"26.1.7 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 ",(0,i.kt)("inlineCode",{parentName:"h2"},"ISchedulerFactory")),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor"},"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 ",(0,i.kt)("inlineCode",{parentName:"h2"},"IJobMonitor")),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor"},"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 ",(0,i.kt)("inlineCode",{parentName:"h2"},"IJobExecutor")),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26110-\u4f5c\u4e1a\u683c\u5f0f\u5316\u8f93\u51fa"},"26.1.10 \u4f5c\u4e1a\u683c\u5f0f\u5316\u8f93\u51fa"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26111-\u4f5c\u4e1a\u6301\u4e45\u5316\u540c\u6b65"},"26.1.11 \u4f5c\u4e1a\u6301\u4e45\u5316\u540c\u6b65"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26112-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"},"26.1.12 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26113-\u4f5c\u4e1a\u5982\u4f55\u90e8\u7f72"},"26.1.13 \u4f5c\u4e1a\u5982\u4f55\u90e8\u7f72"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26114-\u5e38\u89c1\u95ee\u9898"},"26.1.14 \u5e38\u89c1\u95ee\u9898"),(0,i.kt)("p",null,"\u7d27\u6025\u7f16\u5199\u4e2d\uff0c\u5c06\u5728 2022 \u5e74 11 \u6708 21 \u65e5\u524d\u5b8c\u6210\uff0c\u522b\u50ac\uff01"),(0,i.kt)("h2",{id:"26115-\u53cd\u9988\u4e0e\u5efa\u8bae"},"26.1.15 \u53cd\u9988\u4e0e\u5efa\u8bae"),(0,i.kt)("admonition",{title:"\u4e0e\u6211\u4eec\u4ea4\u6d41",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"\u7ed9 Furion \u63d0 ",(0,i.kt)("a",{parentName:"p",href:"https://gitee.com/dotnetchina/Furion/issues/new?issue"},"Issue"),"\u3002")))}m.isMDXComponent=!0}}]);