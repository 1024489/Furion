<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://furion.icu/furion/blog</id>
    <title>Furion Blog</title>
    <updated>2021-08-11T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://furion.icu/furion/blog"/>
    <subtitle>Furion Blog</subtitle>
    <icon>https://furion.icu/furion/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[6. .NET 6 Preview 7 尝鲜]]></title>
        <id>net6-preview7</id>
        <link href="https://furion.icu/furion/blog/net6-preview7"/>
        <updated>2021-08-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[2021 年 08 月 11 日，微软发布了 .NET 6 Preview 7 版本，Furion 在当天第一时间适配了该版本，并发布 Furion v3.0.0-rc.2 版本。]]></summary>
        <content type="html"><![CDATA[<p><strong>2021 年 08 月 11 日，微软发布了 <code>.NET 6 Preview 7</code> 版本，<code>Furion</code> 在当天第一时间适配了该版本，并发布 <code>Furion v3.0.0-rc.2</code> 版本。</strong></p><p><a href="https://gitee.com/dotnetchina/Furion/tree/3.0.0-rc.2/" target="_blank" rel="noopener noreferrer">Furion .NET 6 Preview 7 源码地址</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="安装-net-6-preview-6-sdk">安装 <code>.NET 6 Preview 6 SDK</code><a class="hash-link" href="#安装-net-6-preview-6-sdk" title="Direct link to heading">​</a></h2><p>尝鲜之前，首先先安装 <code>.NET 6 Preview 7 SDK</code>，下载地址：<a href="https://dotnet.microsoft.com/download/dotnet/6.0" target="_blank" rel="noopener noreferrer">https://dotnet.microsoft.com/download/dotnet/6.0</a></p><p>下载对应系统和处理器版本即可。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="旧项目升级">旧项目升级<a class="hash-link" href="#旧项目升级" title="Direct link to heading">​</a></h2><p>编辑所有 <code>.csproj</code> 项目，修改 <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code> 为 <code>&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;</code>。</p><p>同时升级所有 <code>Microsoft</code> 和 <code>Furion</code> 包为最新版本，<code>Furion</code> 最新版本为：<code>v3.0.0-rc.1</code>。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="新项目使用">新项目使用<a class="hash-link" href="#新项目使用" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="升级-visual-studio-2019">升级 <code>Visual Studio 2019</code><a class="hash-link" href="#升级-visual-studio-2019" title="Direct link to heading">​</a></h3><p>目前 <code>.NET 6 Preview 7</code> 支持使用 <code>Visual Studio 2019 Preview 16.11.0 Preview 4.0</code> 版本，<strong>注意是 <code>Preview</code> 最新版本</strong>。下载地址：<a href="https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16" target="_blank" rel="noopener noreferrer">https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16</a></p><p>已经安装了 <code>Visual Studio 2019 Preview</code> 版本的朋友直接升级到最新版即可。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>特别说明</h5></div><div class="admonition-content"><p>如果使用 <code>Visual Studio Code</code> 开发，可忽略此选项。</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="第一个例子">第一个例子<a class="hash-link" href="#第一个例子" title="Direct link to heading">​</a></h3><p><code>Furion v3.0.0-rc.2</code> 目前提供了所有类型的脚手架，版本号统一 <code>3.0.0-rc.2</code>。</p><p>安装脚手架，打开 <code>CMD/Powershell</code> 执行以下命令：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new --install Furion.Template.Api::3.0.0-rc.2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>创建项目</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new furionapi -n FurionNET6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="打开并启动项目">打开并启动项目<a class="hash-link" href="#打开并启动项目" title="Direct link to heading">​</a></h3><p>打开浏览器查看效果即可。</p>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label=".net6" term=".net6"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[5. 在控制台中使用]]></title>
        <id>console</id>
        <link href="https://furion.icu/furion/blog/console"/>
        <updated>2021-07-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Furion 从 v2.15.3+ 版本开始，支持全平台应用程序开发，包括 Web，控制台，WinForm，WPF，Xamarin/MAUI 等。]]></summary>
        <content type="html"><![CDATA[<p><code>Furion</code> 从 <code>v2.15.3+</code> 版本开始，支持全平台应用程序开发，包括 <code>Web</code>，<code>控制台</code>，<code>WinForm</code>，<code>WPF</code>，<code>Xamarin/MAUI</code> 等。</p><p>在控制台中使用示例：</p><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.DependencyInjection;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Furion.RemoteRequest.Extensions;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using Microsoft.Extensions.DependencyInjection;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">namespace ConsoleApp1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    class Program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        static void Main(string[] args)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // 创建一个服务容器</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            var services = Inject.Create();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // 注册服务</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            services.AddRemoteRequest();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // 所有服务注册完毕后调用 Build() 构建</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            services.Build();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // 使用</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            var helloService = App.GetService&lt;IHelloService&gt;();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Console.WriteLine(helloService.SayHello());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Console.WriteLine("=============");</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            var baidu = "https://www.baidu.com".GetAsStringAsync().GetAwaiter().GetResult();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Console.WriteLine(baidu);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public interface IHelloService</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        string SayHello();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public class HelloService : IHelloService, ITransient</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public string SayHello()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return "Hello Furion.";</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>以上代码通过 <code>var services = Inject.Create();</code> 创建一个服务集合，最后通过 <code>services.Build()</code> 即可完成初始化。</p>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label=".net6" term=".net6"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[4. .NET 6 Preview 6 尝鲜]]></title>
        <id>net6-preview6</id>
        <link href="https://furion.icu/furion/blog/net6-preview6"/>
        <updated>2021-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[2021 年 07 月 15 日，微软发布了 .NET 6 Preview 6 版本，Furion 在当天第一时间适配了该版本，并发布 Furion v3.0.0-rc.1 版本。]]></summary>
        <content type="html"><![CDATA[<p><strong>2021 年 07 月 15 日，微软发布了 <code>.NET 6 Preview 6</code> 版本，<code>Furion</code> 在当天第一时间适配了该版本，并发布 <code>Furion v3.0.0-rc.1</code> 版本。</strong></p><p><a href="https://gitee.com/dotnetchina/Furion/tree/3.0.0-rc.1/" target="_blank" rel="noopener noreferrer">Furion .NET 6 Preview 6 源码地址</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="安装-net-6-preview-6-sdk">安装 <code>.NET 6 Preview 6 SDK</code><a class="hash-link" href="#安装-net-6-preview-6-sdk" title="Direct link to heading">​</a></h2><p>尝鲜之前，首先先安装 <code>.NET 6 Preview 6 SDK</code>，下载地址：<a href="https://dotnet.microsoft.com/download/dotnet/6.0" target="_blank" rel="noopener noreferrer">https://dotnet.microsoft.com/download/dotnet/6.0</a></p><p>下载对应系统和处理器版本即可。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="旧项目升级">旧项目升级<a class="hash-link" href="#旧项目升级" title="Direct link to heading">​</a></h2><p>编辑所有 <code>.csproj</code> 项目，修改 <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code> 为 <code>&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;</code>。</p><p>同时升级所有 <code>Microsoft</code> 和 <code>Furion</code> 包为最新版本，<code>Furion</code> 最新版本为：<code>v3.0.0-rc.1</code>。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="新项目使用">新项目使用<a class="hash-link" href="#新项目使用" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="升级-visual-studio-2019">升级 <code>Visual Studio 2019</code><a class="hash-link" href="#升级-visual-studio-2019" title="Direct link to heading">​</a></h3><p>目前 <code>.NET 6 Preview 6</code> 支持使用 <code>Visual Studio 2019 Preview 16.11.0 Preview 3.0</code> 版本，<strong>注意是 <code>Preview</code> 最新版本</strong>。下载地址：<a href="https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16" target="_blank" rel="noopener noreferrer">https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16</a></p><p>已经安装了 <code>Visual Studio 2019 Preview</code> 版本的朋友直接升级到最新版即可。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>特别说明</h5></div><div class="admonition-content"><p>如果使用 <code>Visual Studio Code</code> 开发，可忽略此选项。</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="第一个例子">第一个例子<a class="hash-link" href="#第一个例子" title="Direct link to heading">​</a></h3><p><code>Furion v3.0.0-rc.1</code> 目前提供了所有类型的脚手架，版本号统一 <code>3.0.0-rc.1</code>。</p><p>安装脚手架，打开 <code>CMD/Powershell</code> 执行以下命令：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new --install Furion.Template.Api::3.0.0-rc.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>创建项目</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new furionapi -n FurionNET6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="打开并启动项目">打开并启动项目<a class="hash-link" href="#打开并启动项目" title="Direct link to heading">​</a></h3><p>打开浏览器查看效果即可。</p>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label=".net6" term=".net6"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[3. .NET 6 Preview 5 尝鲜]]></title>
        <id>net6-preview5</id>
        <link href="https://furion.icu/furion/blog/net6-preview5"/>
        <updated>2021-06-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[2021 年 06 月 18 日，微软发布了 .NET 6 Preview 5 版本，Furion 在当天第一时间适配了该版本，并发布 Furion v3.0.0-preview.5.21301.9 版本。]]></summary>
        <content type="html"><![CDATA[<p><strong>2021 年 06 月 18 日，微软发布了 <code>.NET 6 Preview 5</code> 版本，<code>Furion</code> 在当天第一时间适配了该版本，并发布 <code>Furion v3.0.0-preview.5.21301.9</code> 版本。</strong></p><p><a href="https://gitee.com/dotnetchina/Furion/tree/net6.0-preview5/" target="_blank" rel="noopener noreferrer">Furion .NET 6 Preview 5 源码地址</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="等不及尝鲜了">等不及尝鲜了<a class="hash-link" href="#等不及尝鲜了" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="安装-net-6-preview-5-sdk">安装 <code>.NET 6 Preview 5 SDK</code><a class="hash-link" href="#安装-net-6-preview-5-sdk" title="Direct link to heading">​</a></h3><p>尝鲜之前，首先先安装 <code>.NET 6 Preview 5 SDK</code>，下载地址：<a href="https://dotnet.microsoft.com/download/dotnet/6.0" target="_blank" rel="noopener noreferrer">https://dotnet.microsoft.com/download/dotnet/6.0</a></p><p>下载对应系统和处理器版本即可。</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="升级-visual-studio-2019">升级 <code>Visual Studio 2019</code><a class="hash-link" href="#升级-visual-studio-2019" title="Direct link to heading">​</a></h3><p>目前 <code>.NET 6 Preview 5</code> 支持使用 <code>Visual Studio 2019 Preview 16.11.0 Preview 2.0</code> 版本，<strong>注意是 <code>Preview</code> 最新版本</strong>。下载地址：<a href="https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16" target="_blank" rel="noopener noreferrer">https://visualstudio.microsoft.com/zh-hans/thank-you-downloading-visual-studio/?sku=enterprise&amp;ch=pre&amp;rel=16</a></p><p>已经安装了 <code>Visual Studio 2019 Preview</code> 版本的朋友直接升级到最新版即可。</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>特别说明</h5></div><div class="admonition-content"><p>如果使用 <code>Visual Studio Code</code> 开发，可忽略此选项。</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="第一个例子">第一个例子<a class="hash-link" href="#第一个例子" title="Direct link to heading">​</a></h3><p><code>Furion v3.0.0-preview.5.21301.9</code> 目前提供了所有类型的脚手架，版本号统一 <code>3.0.0-preview.5.21301.9</code>。</p><p>安装脚手架，打开 <code>CMD/Powershell</code> 执行以下命令：</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new --install Furion.Template.Api::3.0.0-preview.5.21301.9</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>创建项目</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dotnet new furionapi -n FurionNET6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="打开并启动项目">打开并启动项目<a class="hash-link" href="#打开并启动项目" title="Direct link to heading">​</a></h3><p>打开浏览器查看效果即可。</p>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label=".net6" term=".net6"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2. 文件上传下载]]></title>
        <id>fileupload-download</id>
        <link href="https://furion.icu/furion/blog/fileupload-download"/>
        <updated>2021-02-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[文件下载]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="文件下载">文件下载<a class="hash-link" href="#文件下载" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[HttpGet, NonUnify]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public IActionResult FileDownload(string path, string fileName)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    string filePath = "这里获取完整的文件下载路径";</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return new FileStreamResult(new FileStream(filePath, FileMode.Open), "application/octet-stream") { FileDownloadName = fileName };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>关于前端获取文件名</h5></div><div class="admonition-content"><p>如果前端获取不到文件夹，可添加以下配置：</p><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">_httpContextAccessor.HttpContext.Response.Headers.Add("Content-Disposition", $"attachment; filename={文件名}");</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">_httpContextAccessor.HttpContext.Response.Headers.Add("Access-Control-Expose-Headers", "Content-Disposition");</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="文件上传">文件上传<a class="hash-link" href="#文件上传" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[HttpPost, NonUnify]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public async Task&lt;IActionResult&gt; UploadFileAsync(List&lt;IFormFile&gt; files)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 保存到网站根目录下的 uploads 目录</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    var savePath = Path.Combine(App.HostEnvironment.ContentRootPath, "uploads");</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(!Directory.Exists(savePath)) Directory.CreateDirectory(savePath);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    long size = files.Sum(f =&gt; f.Length);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    foreach (var formFile in files)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (formFile.Length &gt; 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            // 避免文件名重复，采用 GUID 生成</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            var filePath = Path.Combine(savePath, Guid.NewGuid().ToString("N") + Path.GetExtension(formFile.FileName));  // 可以替代为你需要存储的真实路径</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            using (var stream = System.IO.File.Create(filePath))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                await formFile.CopyToAsync(stream);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // 在动态 API 直接返回对象即可，无需 OK 和 IActionResult</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return Ok(new { count = files.Count, size });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label="upload" term="upload"/>
        <category label="download" term="download"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[1. HttpContext 应用]]></title>
        <id>httpcontext</id>
        <link href="https://furion.icu/furion/blog/httpcontext"/>
        <updated>2021-02-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[HttpContext 重大调整]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="httpcontext-重大调整">HttpContext 重大调整<a class="hash-link" href="#httpcontext-重大调整" title="Direct link to heading">​</a></h2><p>在 <code>ASP.NET</code> 的时代，我们通常通过 <code>HttpContext</code> 全局静态类获取请求上下文，但在 <code>ASP.NET Core</code> 中，<code>HttpContext</code> 是一个非静态的抽象类，无法手动创建，也无法通过静态获取。</p><p>虽然在 <code>ASP.NET Core</code> 中无法直接获取 <code>HttpContext</code> 对象。但是微软也提供了注入 <code>IHttpContextAccessor</code> 方式获取。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="httpcontext-多种获取方式">HttpContext 多种获取方式<a class="hash-link" href="#httpcontext-多种获取方式" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="在-controllerbase-派生类中">在 <code>ControllerBase</code> 派生类中<a class="hash-link" href="#在-controllerbase-派生类中" title="Direct link to heading">​</a></h3><p>在 <code>ControllerBase</code> 派生类中，我们可以直接通过 <code>HttpContext</code> 属性获取 <code>HttpContext</code> 对象。</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="通过注入-ihttpcontextaccessor">通过注入 <code>IHttpContextAccessor</code><a class="hash-link" href="#通过注入-ihttpcontextaccessor" title="Direct link to heading">​</a></h3><p>在 <code>Furion</code> 框架中，默认已经注册了 <code>IHttpContextAccessor</code> 服务，所以我们可以通过构造函数注入该对象获取。</p><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class AppService</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">    public AppService(IHttpContextAccessor httpContextAccessor)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#bfc7d5"><span class="token plain">        var httpContext = httpContextAccessor.HttpContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="通过-apphttpcontext">通过 <code>App.HttpContext</code><a class="hash-link" href="#通过-apphttpcontext" title="Direct link to heading">​</a></h3><p><code>App</code> 静态类也提供了 <code>App.HttpContext</code> 获取 <code>HttpContext</code> 对象。</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="httpcontext-拓展方法"><code>HttpContext</code> 拓展方法<a class="hash-link" href="#httpcontext-拓展方法" title="Direct link to heading">​</a></h2><p><code>Furion</code> 框架也提供了一些常用的 <code>HttpContext</code> 拓展方法</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="获取当前请求的特性">获取当前请求的特性<a class="hash-link" href="#获取当前请求的特性" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var attribute = httpContext.GetMetadata&lt;SomeAttribute&gt;();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="设置-swagger-自动授权">设置 <code>Swagger</code> 自动授权<a class="hash-link" href="#设置-swagger-自动授权" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">httpContext.SigninToSwagger("你的token");</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="退出-swagger-授权">退出 <code>Swagger</code> 授权<a class="hash-link" href="#退出-swagger-授权" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">httpContext.SignoutToSwagger();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="获取本地-ip-地址">获取本地 IP 地址<a class="hash-link" href="#获取本地-ip-地址" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var ipv4 = httpContext.GetLocalIpAddressToIPv4();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var ipv6 = httpContext.GetLocalIpAddressToIPv6();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="获取客户端-ip-地址">获取客户端 IP 地址<a class="hash-link" href="#获取客户端-ip-地址" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-cs theme-code-block"><div class="codeBlockContent_wNvx cs"><pre tabindex="0" class="prism-code language-cs codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">var ipv4 = httpContext.GetRemoteIpAddressToIPv4();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var ipv6 = httpContext.GetRemoteIpAddressToIPv6();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div>]]></content>
        <author>
            <name>dotNET China</name>
            <uri>https://www.chinadot.net</uri>
        </author>
        <category label="furion" term="furion"/>
        <category label="furos" term="furos"/>
        <category label=".net" term=".net"/>
        <category label=".netcore" term=".netcore"/>
        <category label=".net5" term=".net5"/>
        <category label="httpcontext" term="httpcontext"/>
    </entry>
</feed>